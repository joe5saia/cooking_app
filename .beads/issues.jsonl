{"id":"cooking_app-064","title":"Cookctl: split command router into domain files","description":"Refactor cookctl app.go into focused files (router, auth, token, recipe, meal-plan, config, help, output/prompts) and mirror the split in app_test.go for easier navigation and review.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T17:21:39.308415-05:00","updated_at":"2025-12-28T18:54:20.1664-05:00","closed_at":"2025-12-28T18:54:20.1664-05:00"}
{"id":"cooking_app-0uh","title":"Backend: Add initial Postgres schema migration (users, recipes, books, tags, tokens)","description":"Create the v1 database schema exactly as specified, including audit fields, constraints, indexes, and extensions.\n\nSpec references:\n- `personal-recipe-app-spec.md` section 7.2 (Tables) and 7.1 (Conventions).\n\nSchema requirements (minimum):\n- `users` (with bootstrap self-referential `created_by/updated_by` approach per spec).\n- `recipe_books`, `tags`, `recipes` (with `recipe_book_id` nullable, `deleted_at` for recipes only).\n- `recipe_ingredients` (with `position`, quantity fields, and `(recipe_id, position)` index).\n- `recipe_steps` (with `(recipe_id, step_number)` unique).\n- `recipe_tags` (PK `(recipe_id, tag_id)` plus audit fields).\n- `personal_access_tokens` (hash only, optional `expires_at`, `last_used_at`).\n\nDecisions to lock in (update spec if needed):\n- Case-insensitive uniqueness strategy for usernames/books/tags (`citext` vs `lower()` indexes).\n- Title search strategy (`lower(title)` vs `pg_trgm` + GIN as recommended).\n- Ingredient `position` convention (0-based vs 1-based).","acceptance_criteria":"- Migrations create all required tables/constraints/indexes per spec.\n- If any schema decisions diverge from the spec text, update `personal-recipe-app-spec.md` to match the final schema.\n- Add integration tests that apply migrations and verify key constraints/indexes (e.g., unique constraints, FK constraints, soft-delete column exists).\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T11:27:28.630447-05:00","updated_at":"2025-12-13T12:36:20.922965-05:00","closed_at":"2025-12-13T12:36:20.922965-05:00","dependencies":[{"issue_id":"cooking_app-0uh","depends_on_id":"cooking_app-dcn","type":"parent-child","created_at":"2025-12-13T11:34:47.23935-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-0uh","depends_on_id":"cooking_app-zvm","type":"blocks","created_at":"2025-12-13T11:35:59.222071-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-0vi","title":"CLI: recipe commands","description":"Add cookctl recipe list/get/create/update/delete/restore commands with PAT auth.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T22:35:56.976454-05:00","updated_at":"2025-12-22T22:36:37.806506-05:00","closed_at":"2025-12-22T22:36:37.806506-05:00"}
{"id":"cooking_app-0vi.1","title":"CLI: recipe client support","description":"Add recipe list/get/create/update/delete/restore API calls to cookctl client.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:36:01.109057-05:00","updated_at":"2025-12-22T22:36:27.228371-05:00","closed_at":"2025-12-22T22:36:27.228371-05:00","dependencies":[{"issue_id":"cooking_app-0vi.1","depends_on_id":"cooking_app-0vi","type":"parent-child","created_at":"2025-12-22T22:36:01.109906-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-0vi.2","title":"CLI: recipe commands and output","description":"Implement cookctl recipe commands with table/json output and confirmation handling.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:36:06.443825-05:00","updated_at":"2025-12-22T22:36:30.756527-05:00","closed_at":"2025-12-22T22:36:30.756527-05:00","dependencies":[{"issue_id":"cooking_app-0vi.2","depends_on_id":"cooking_app-0vi","type":"parent-child","created_at":"2025-12-22T22:36:06.445524-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-0vi.3","title":"CLI: recipe command tests","description":"Add unit tests for recipe commands.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:36:11.259085-05:00","updated_at":"2025-12-22T22:36:34.34035-05:00","closed_at":"2025-12-22T22:36:34.34035-05:00","dependencies":[{"issue_id":"cooking_app-0vi.3","depends_on_id":"cooking_app-0vi","type":"parent-child","created_at":"2025-12-22T22:36:11.259942-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-131","title":"Recipe detail: show API error message on load failure","description":"When loading recipe detail fails (non-404), display ApiError message (problem.message) in the alert instead of a generic string; add tests.","status":"closed","priority":4,"issue_type":"bug","created_at":"2025-12-13T22:52:21.116002-05:00","updated_at":"2025-12-13T22:54:14.229325-05:00","closed_at":"2025-12-13T22:54:14.229325-05:00"}
{"id":"cooking_app-15g","title":"Frontend: Block direct document.cookie usage","description":"Add an ast-grep rule to prevent direct document.cookie usage outside src/api/client and tests so CSRF handling stays centralized.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T19:58:46.123889-05:00","updated_at":"2025-12-22T19:59:26.737677-05:00","closed_at":"2025-12-22T19:59:26.737677-05:00"}
{"id":"cooking_app-171","title":"Chore: plan cookctl commit bundling","description":"Draft a commit grouping plan for cookctl scaffold changes that keeps .beads/issues.jsonl in sync.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T04:46:27.127338-05:00","updated_at":"2025-12-23T04:46:45.457388-05:00","closed_at":"2025-12-23T04:46:45.457388-05:00","dependencies":[{"issue_id":"cooking_app-171","depends_on_id":"cooking_app-6lu","type":"discovered-from","created_at":"2025-12-23T04:46:27.129592-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-1aq","title":"Fix tar-over-ssh deploy sync breaking Caddy bind mounts","description":"When remote rsync is unavailable, deploy script deletes the entire remote dir before untarring; doing this while containers are running invalidates bind mounts (e.g. frontend dist -\u003e /srv), leading to 404 at / until containers are recreated.","acceptance_criteria":"- Tar-over-ssh deploy path does not invalidate bind mounts\n- Subsequent deploys keep serving / correctly","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-14T19:22:16.16113-05:00","updated_at":"2025-12-14T20:09:05.071053-05:00","closed_at":"2025-12-14T20:09:05.071053-05:00"}
{"id":"cooking_app-1g9","title":"Frontend: Add unit test setup (Vitest + React Testing Library) and run it in CI","description":"Add a frontend unit/component testing setup so subsequent UI issues can add real tests.\n\nSpec references:\n- `personal-recipe-app-spec.md` section 13 (Frontend testing requirements).\n\nImplementation notes:\n- Add `vitest`, `@testing-library/react`, `@testing-library/jest-dom`, and `jsdom`.\n- Add `npm run test` (and optionally `test:watch`).\n- Consider updating root `Makefile` `frontend-ci` to include `npm run test` so tests are enforced.\n- Add at least one smoke test (e.g., renders App shell or login route).","acceptance_criteria":"- `npm run test` runs in CI/non-CI and passes.\n- At least one test exists and asserts a real UI behavior.\n- If `make frontend-ci` is updated, ensure `make ci` passes.\n- Run `make frontend-format` (if files changed) and ensure `make frontend-ci` passes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T11:32:18.03251-05:00","updated_at":"2025-12-13T16:45:45.158558-05:00","closed_at":"2025-12-13T16:45:45.158558-05:00","dependencies":[{"issue_id":"cooking_app-1g9","depends_on_id":"cooking_app-7ko","type":"parent-child","created_at":"2025-12-13T11:35:22.1511-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-1ha","title":"Backend: Add OpenAPI v1 document and CI validation (optional TS client generation)","description":"Create and maintain an OpenAPI document for the v1 REST API.\n\nSpec references:\n- `personal-recipe-app-spec.md` section 10.4 (OpenAPI recommended) and section 8 (API specification).\n\nImplementation notes:\n- Add `backend/openapi.yaml` (or `openapi.yaml` per spec’s recommended layout) describing at least:\n  - `/api/v1/auth/*`\n  - `/api/v1/tokens`\n  - `/api/v1/users`\n  - `/api/v1/recipe-books`, `/api/v1/tags`\n  - `/api/v1/recipes` and `/api/v1/recipes/{id}` plus delete/restore\n- Add a CI validation step so the spec stays valid.\n- If TS client generation is adopted, document where the generated client lives and ensure it is reproducible.","acceptance_criteria":"- OpenAPI document exists and is validated automatically (CI/script).\n- Add automated tests that assert the OpenAPI includes required paths/schemas (e.g., a Go unit test that parses YAML and checks for required endpoints).\n- If the OpenAPI file path differs from `personal-recipe-app-spec.md` recommendations, update the spec.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T11:33:53.069411-05:00","updated_at":"2025-12-13T19:47:50.174109-05:00","closed_at":"2025-12-13T19:47:50.174109-05:00","dependencies":[{"issue_id":"cooking_app-1ha","depends_on_id":"cooking_app-dcn","type":"parent-child","created_at":"2025-12-13T11:34:47.218556-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-1jw","title":"Deployment: Ignore local backup artifacts","description":"`deploy/backup-postgres.sh` writes backups under `deploy/backups/`. Add gitignore entries so local backup artifacts are never accidentally committed.","acceptance_criteria":"- `deploy/backups/` is ignored by git.\n- `make ci` passes.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-13T22:00:54.737378-05:00","updated_at":"2025-12-13T22:01:53.37299-05:00","closed_at":"2025-12-13T22:01:53.37299-05:00"}
{"id":"cooking_app-1mu","title":"CLI: config unset","description":"Add cookctl config unset to clear specific config keys.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T22:44:48.409685-05:00","updated_at":"2025-12-22T22:46:00.596676-05:00","closed_at":"2025-12-22T22:46:00.596676-05:00"}
{"id":"cooking_app-1mu.1","title":"CLI: config unset command","description":"Implement config unset command flags and persistence.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T22:44:52.390787-05:00","updated_at":"2025-12-22T22:45:52.143803-05:00","closed_at":"2025-12-22T22:45:52.143803-05:00","dependencies":[{"issue_id":"cooking_app-1mu.1","depends_on_id":"cooking_app-1mu","type":"parent-child","created_at":"2025-12-22T22:44:52.391593-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-1mu.2","title":"CLI: config unset tests","description":"Add unit tests for config unset command.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T22:44:56.259587-05:00","updated_at":"2025-12-22T22:45:55.984443-05:00","closed_at":"2025-12-22T22:45:55.984443-05:00","dependencies":[{"issue_id":"cooking_app-1mu.2","depends_on_id":"cooking_app-1mu","type":"parent-child","created_at":"2025-12-22T22:44:56.261626-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-1py","title":"Recipe detail: render tag list with separators as links","description":"Add test coverage for the new tag Links on the recipe detail page (ensuring navigation to /recipes works).","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-13T22:31:51.708603-05:00","updated_at":"2025-12-13T22:37:09.973379-05:00","closed_at":"2025-12-13T22:37:09.973379-05:00"}
{"id":"cooking_app-1sd","title":"Deploy: Add bootstrap-user helper script","description":"Provide a script to run the bootstrap-user CLI against the deployed compose stack over SSH, with basic validation and a test harness.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T20:01:15.055026-05:00","updated_at":"2025-12-22T20:01:22.030634-05:00","closed_at":"2025-12-22T20:01:22.030634-05:00"}
{"id":"cooking_app-1te","title":"CLI: support --version flag","description":"Allow cookctl --version to print build metadata without requiring the version subcommand.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T23:20:43.533906-05:00","updated_at":"2025-12-22T23:22:10.618588-05:00","closed_at":"2025-12-22T23:22:10.618588-05:00"}
{"id":"cooking_app-2iw","title":"MVP v1 epic: Backend recipes, books, tags REST API","description":"Implement the core recipe management REST API per `personal-recipe-app-spec.md` (recipes CRUD + listing/search/sort, recipe books, tags).\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 4 (Product requirements), 7 (Data model), 8.5–8.7 (Books/Tags/Recipes API), 9.2 (transactional update), 13 (Backend tests), 14 (Acceptance criteria).\n\nScope:\n- Recipe Books CRUD endpoints.\n- Tags CRUD endpoints.\n- Recipes list/detail/create/update/soft-delete and recommended restore endpoint.\n- Validation rules + transactional replace semantics.\n\nNon-goals:\n- Meal planning/grocery/offline/import/export (explicit non-goals).","acceptance_criteria":"- All child issues under this epic are completed and meet their own acceptance criteria.\n- Any implementation decisions (pagination, search indexing, etc.) are reflected in `personal-recipe-app-spec.md`.\n- `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T11:26:37.596954-05:00","updated_at":"2025-12-13T21:51:36.308363-05:00","closed_at":"2025-12-13T21:51:36.308363-05:00"}
{"id":"cooking_app-2l8","title":"Deploy: default to HTTPS in deploy script","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T15:24:11.931764-05:00","updated_at":"2025-12-28T15:28:19.056193-05:00","closed_at":"2025-12-28T15:28:19.056193-05:00"}
{"id":"cooking_app-2ol","title":"Docs: align cookctl docs with CLI behavior","description":"Update cookctl product doc and user docs to reflect current CLI behavior (global flag placement, help usage, output/error contract, recipe init signature, config command inclusion).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T04:24:53.489177-05:00","updated_at":"2025-12-23T04:25:45.156504-05:00","closed_at":"2025-12-23T04:25:45.156504-05:00","dependencies":[{"issue_id":"cooking_app-2ol","depends_on_id":"cooking_app-6lu","type":"discovered-from","created_at":"2025-12-23T04:24:53.491621-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-2xp","title":"CLI: document completion helpers","description":"Add clear comments for new completion-related functions/constants in cookctl to satisfy documentation guidance.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T23:24:27.596523-05:00","updated_at":"2025-12-22T23:24:58.107133-05:00","closed_at":"2025-12-22T23:24:58.107133-05:00"}
{"id":"cooking_app-30b","title":"Backend PATs: Implement Bearer token authentication (hash lookup, expiry, last_used_at)","description":"Implement PAT-based request authentication for API clients.\n\nSpec references:\n- `personal-recipe-app-spec.md` section 9.5 (PAT authentication) and 12 (Security).\n\nImplementation notes:\n- Parse `Authorization: Bearer \u003cPAT\u003e`.\n- Hash secret (e.g., sha256) and look up by hash index.\n- Enforce expiration (`expires_at`), and reject revoked/unknown tokens.\n- Update `last_used_at` best-effort on successful auth.\n- Ensure middleware sets `auth_type = \"pat\"` for logging.","acceptance_criteria":"- Requests with valid PAT authenticate successfully; invalid/expired tokens get 401.\n- Unit tests cover parsing, hashing, and expiry behavior.\n- Integration tests cover a protected endpoint using PAT auth (per spec acceptance criteria #5).\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T11:29:24.627703-05:00","updated_at":"2025-12-13T18:23:40.075629-05:00","closed_at":"2025-12-13T18:23:40.075629-05:00","dependencies":[{"issue_id":"cooking_app-30b","depends_on_id":"cooking_app-hz4","type":"parent-child","created_at":"2025-12-13T11:34:56.874825-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-30b","depends_on_id":"cooking_app-4u5","type":"blocks","created_at":"2025-12-13T11:36:17.586291-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-31i","title":"Frontend: Fix CSRF error when creating users","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T15:52:46.645592-05:00","updated_at":"2025-12-21T15:56:42.436854-05:00","closed_at":"2025-12-21T15:56:42.436854-05:00"}
{"id":"cooking_app-3p6","title":"Cookctl: add shared token/client helpers","description":"Reduce repeated token/auth checks and API client setup in run* handlers with helpers (e.g., withToken / withClient / ensureAuthed).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T17:21:46.64117-05:00","updated_at":"2025-12-30T20:07:33.568274-05:00","closed_at":"2025-12-30T20:07:33.568274-05:00","close_reason":"Added shared authed client/token helpers"}
{"id":"cooking_app-3qr","title":"Backend+Frontend: Persist meal plan entries","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-23T10:11:55.905596-05:00","updated_at":"2025-12-23T10:26:55.944429-05:00","closed_at":"2025-12-23T10:26:55.944429-05:00"}
{"id":"cooking_app-3vo","title":"Backend logging: Add structured request logging middleware (JSONL fields per spec)","description":"Implement request-level structured logging so each API request emits JSONL with the fields defined in the spec.\n\nSpec references:\n- `personal-recipe-app-spec.md` section 9.6 (Logging: JSONL).\n\nImplementation notes:\n- Log fields: `ts`, `level`, `msg`, `request_id`, `remote_ip`, `method`, `path`, `status`, `duration_ms`, and when available: `user_id`, `auth_type` (`session|pat`).\n- Ensure compatibility with existing `chi` middleware (request id, real ip).\n- Avoid logging secrets (Authorization headers, passwords, PAT secrets).","acceptance_criteria":"- Request logs include required fields and omit secrets.\n- Unit tests validate logging includes request_id/status/duration and includes `user_id` when auth present.\n- Integration tests verify at least one logged request includes `auth_type`.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T11:29:24.56073-05:00","updated_at":"2025-12-13T18:34:15.624499-05:00","closed_at":"2025-12-13T18:34:15.624499-05:00","dependencies":[{"issue_id":"cooking_app-3vo","depends_on_id":"cooking_app-dcn","type":"parent-child","created_at":"2025-12-13T11:34:47.24863-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-3vo","depends_on_id":"cooking_app-m04","type":"blocks","created_at":"2025-12-13T11:35:59.20707-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-45z","title":"Backend users API: Implement /api/v1/users (list, create) and optional deactivate endpoint","description":"Implement admin-style user management (all users are effectively admin in v1).\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 3 (Provisioning model), 8.4 (User management endpoints), 14 (Acceptance criteria #1).\n\nImplementation notes:\n- `GET /api/v1/users`: list users (exclude password_hash).\n- `POST /api/v1/users`: create user with username/password/display_name.\n- Optional but recommended: `PUT /api/v1/users/{id}/deactivate` sets `is_active=false`.\n- Enforce: only authenticated users can manage users.","acceptance_criteria":"- Endpoints exist and match spec intent; if response shapes differ, update `personal-recipe-app-spec.md` accordingly.\n- Validation errors use the shared problem-style JSON format.\n- Unit tests cover request validation and response shaping.\n- Integration tests cover list/create (and deactivate if implemented).\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T11:29:24.606162-05:00","updated_at":"2025-12-13T18:29:24.383502-05:00","closed_at":"2025-12-13T18:29:24.383502-05:00","dependencies":[{"issue_id":"cooking_app-45z","depends_on_id":"cooking_app-hz4","type":"parent-child","created_at":"2025-12-13T11:34:56.895135-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-45z","depends_on_id":"cooking_app-qno","type":"blocks","created_at":"2025-12-13T11:36:17.574191-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-45z","depends_on_id":"cooking_app-m04","type":"blocks","created_at":"2025-12-13T11:36:17.597089-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-4dx","title":"Deployment: Provide custom Caddy DNS-01 image build example","description":"The production compose skeleton requires a Caddy build with a DNS provider module for DNS-01, but deploy/compose.yaml currently uses stock caddy:2. Add deploy/Dockerfile.caddy (xcaddy build) and update deploy/README.md + deploy/compose.yaml to show how to build/run with a DNS module (default Cloudflare, configurable via build args).","acceptance_criteria":"- `deploy/Dockerfile.caddy` exists and builds a Caddy binary with a configurable DNS module.\n- `deploy/compose.yaml` documents/uses the custom Caddy build.\n- `deploy/README.md` explains how to set the DNS module + provider env vars.\n- `make ci` passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T22:02:51.09934-05:00","updated_at":"2025-12-13T22:04:00.80596-05:00","closed_at":"2025-12-13T22:04:00.80596-05:00"}
{"id":"cooking_app-4jx","title":"Deployment: Document and/or script Postgres backups (pg_dump) with retention guidance","description":"Add backup documentation or scripts for Postgres backups as described in the spec.\n\nSpec references:\n- `personal-recipe-app-spec.md` section 11.6 (Backups).\n\nImplementation notes:\n- Provide a sample script that runs `pg_dump` via `docker exec` into a host directory.\n- Document recommended cron/systemd timer configuration and retention policy (even if final numbers are TBD).","acceptance_criteria":"- Backup instructions (and script if added) are present and align with `personal-recipe-app-spec.md`.\n- If you choose a specific retention policy or script path, update `personal-recipe-app-spec.md` accordingly.\n- Add automated checks where applicable (shellcheck, basic script tests).\n- Ensure `make ci` passes.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-13T11:33:53.042764-05:00","updated_at":"2025-12-13T21:51:06.131227-05:00","closed_at":"2025-12-13T21:51:06.131227-05:00","dependencies":[{"issue_id":"cooking_app-4jx","depends_on_id":"cooking_app-5qy","type":"parent-child","created_at":"2025-12-13T11:35:27.051759-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-4lu","title":"Frontend settings: Implement /settings/users user manager UI","description":"Implement UI for admin-style user management.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 4.1 (Settings), 8.4 (User management endpoints), 3 (Provisioning model).\n\nImplementation notes:\n- List users.\n- Create user (username/password/display_name).\n- Optional: deactivate user (if backend supports it).","acceptance_criteria":"- UI works end-to-end against backend users endpoints.\n- Add component tests for create user validation and submit.\n- Run `make frontend-format` and ensure `make frontend-ci` (and `npm run test` if present) passes.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T11:32:52.42606-05:00","updated_at":"2025-12-13T20:25:22.580552-05:00","closed_at":"2025-12-13T20:25:22.580552-05:00","dependencies":[{"issue_id":"cooking_app-4lu","depends_on_id":"cooking_app-7ko","type":"parent-child","created_at":"2025-12-13T11:35:22.185886-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-4lu","depends_on_id":"cooking_app-hm9","type":"blocks","created_at":"2025-12-13T11:37:35.627034-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-4lu","depends_on_id":"cooking_app-45z","type":"blocks","created_at":"2025-12-13T11:37:35.641399-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-4lu","depends_on_id":"cooking_app-rmu","type":"blocks","created_at":"2025-12-13T11:37:35.644625-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-4u5","title":"Backend PATs: Implement /api/v1/tokens create/list/revoke endpoints","description":"Implement Personal Access Token (PAT) management endpoints required from day one.\n\nSpec references:\n- `personal-recipe-app-spec.md` section 8.3 (PAT endpoints) and 7.2.8 (`personal_access_tokens`).\n\nImplementation notes:\n- `POST /api/v1/tokens`: accept `name` and optional `expires_at`, generate secret with `umami_pat_` prefix, store only hash, return secret once.\n- `GET /api/v1/tokens`: list current user tokens (no secret), include `last_used_at` and `expires_at`.\n- `DELETE /api/v1/tokens/{id}`: revoke token (`204`).","acceptance_criteria":"- Endpoints match spec status codes and response shapes.\n- Token secret is only returned once; DB stores only hash.\n- Unit tests cover token generation format + hashing.\n- Integration tests cover create/list/revoke end-to-end.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T11:29:24.617404-05:00","updated_at":"2025-12-13T18:13:13.095705-05:00","closed_at":"2025-12-13T18:13:13.095705-05:00","dependencies":[{"issue_id":"cooking_app-4u5","depends_on_id":"cooking_app-hz4","type":"parent-child","created_at":"2025-12-13T11:34:56.908611-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-4u5","depends_on_id":"cooking_app-6aa","type":"blocks","created_at":"2025-12-13T11:36:17.553621-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-4u5","depends_on_id":"cooking_app-h12","type":"blocks","created_at":"2025-12-13T11:36:17.578494-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-56r","title":"Recipes list: show error when restore action fails","description":"If restoring a deleted recipe from the list fails, show a visible error (using ApiError message when available) and keep list usable; add tests.","status":"closed","priority":4,"issue_type":"bug","created_at":"2025-12-13T22:41:45.082239-05:00","updated_at":"2025-12-13T22:42:39.363079-05:00","closed_at":"2025-12-13T22:42:39.363079-05:00"}
{"id":"cooking_app-571","title":"Frontend books: Implement /books screen (CRUD)","description":"Implement recipe books management UI.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 4.3 (Recipe books), 8.5 (Recipe Books endpoints), 10.2 (routes).\n\nImplementation notes:\n- List books.\n- Create and rename books.\n- Delete books with behavior matching backend/spec decision.\n- Keep UI minimal and mobile-friendly.","acceptance_criteria":"- UI supports list/create/update/delete against backend endpoints.\n- Error states are displayed using a consistent UI pattern.\n- Add component tests for create/delete flows.\n- Run `make frontend-format` and ensure `make frontend-ci` (and `npm run test` if present) passes.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T11:32:52.333636-05:00","updated_at":"2025-12-13T20:18:40.481124-05:00","closed_at":"2025-12-13T20:18:40.481124-05:00","dependencies":[{"issue_id":"cooking_app-571","depends_on_id":"cooking_app-7ko","type":"parent-child","created_at":"2025-12-13T11:35:22.182526-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-571","depends_on_id":"cooking_app-hm9","type":"blocks","created_at":"2025-12-13T11:37:35.601611-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-571","depends_on_id":"cooking_app-rmu","type":"blocks","created_at":"2025-12-13T11:37:35.607665-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-571","depends_on_id":"cooking_app-e3h","type":"blocks","created_at":"2025-12-13T11:37:35.613061-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-58u","title":"Recipes list: sync filters to URL querystring","description":"Persist recipe list filters (q, book_id, tag_id, include_deleted) in the URL so refresh/share/back retains state.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-13T22:06:39.204869-05:00","updated_at":"2025-12-13T22:15:08.181549-05:00","closed_at":"2025-12-13T22:15:08.181549-05:00"}
{"id":"cooking_app-5mo","title":"Recipes list: show API error message on load failure","description":"When /api/v1/recipes list request fails, display ApiError message (problem.message) in the alert instead of a generic string; add a test.","status":"closed","priority":4,"issue_type":"bug","created_at":"2025-12-13T22:52:21.145911-05:00","updated_at":"2025-12-13T22:53:22.651605-05:00","closed_at":"2025-12-13T22:53:22.651605-05:00"}
{"id":"cooking_app-5p5","title":"Frontend: Implement React Router routes + AppShell/TopNav navigation","description":"Replace the Vite starter UI with the MVP app shell and routes.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 4.1 (Primary screens), 10.2 (App routes), 10.3 (Component structure).\n\nImplementation notes:\n- Add React Router and define routes:\n  - `/login`\n  - `/recipes`, `/recipes/new`, `/recipes/:id`, `/recipes/:id/edit`\n  - `/books`, `/tags`\n  - `/settings`, `/settings/tokens`, `/settings/users`\n- Implement `AppShell` + `TopNav` (mobile-first).\n- Integrate a simple active route indicator.","acceptance_criteria":"- Navigation renders and routing works for all listed routes (placeholders allowed initially).\n- Add/extend frontend tests to cover routing/nav behavior.\n- Run `make frontend-format` and ensure `make frontend-ci` (and `npm run test` if present) passes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T11:32:18.077657-05:00","updated_at":"2025-12-13T18:08:39.220511-05:00","closed_at":"2025-12-13T18:08:39.220511-05:00","dependencies":[{"issue_id":"cooking_app-5p5","depends_on_id":"cooking_app-7ko","type":"parent-child","created_at":"2025-12-13T11:35:22.157578-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-5p5","depends_on_id":"cooking_app-1g9","type":"blocks","created_at":"2025-12-13T11:36:58.826769-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-5qy","title":"MVP v1 epic: Deployment (Compose + Caddy) and ops","description":"Implement the self-hosted deployment approach described in `personal-recipe-app-spec.md` (Ubuntu + Docker Compose + Caddy + Postgres 18), plus operational basics like backups.\n\nSpec references:\n- `personal-recipe-app-spec.md` section 11 (Deployment specification) and 11.6 (Backups).\n\nScope:\n- Production-oriented compose + Caddy config (TLS via DNS-01 guidance).\n- Document required env vars and operational steps.\n- Add backup guidance/scripts.\n\nNon-goals:\n- Kubernetes/Helm; advanced observability beyond structured logs in spec.","acceptance_criteria":"- Deployment artifacts exist as described in `personal-recipe-app-spec.md`, and the spec is updated if filenames/paths/config differ.\n- Any scripts/config added are covered by tests where applicable.\n- `make ci` passes.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-13T11:26:37.571415-05:00","updated_at":"2025-12-13T21:51:20.978403-05:00","closed_at":"2025-12-13T21:51:20.978403-05:00"}
{"id":"cooking_app-655","title":"CLI: show api url in auth status","description":"Include the resolved API URL in auth status output for clarity when multiple environments are used.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-22T23:28:35.104174-05:00","updated_at":"2025-12-22T23:30:44.759441-05:00","closed_at":"2025-12-22T23:30:44.759441-05:00"}
{"id":"cooking_app-6aa","title":"Backend auth: Implement session management + /auth/login|logout|me endpoints","description":"Implement browser authentication using cookie-based sessions and the auth endpoints defined in the spec.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 8.2 (Auth endpoints), 9.4 (Sessions), 12 (cookie requirements).\n\nImplementation notes:\n- Decide session storage strategy:\n  - Recommended: server-side sessions stored in Postgres (add `sessions` table if needed).\n  - Alternative: signed cookies (if chosen, update spec to match).\n- `/api/v1/auth/login`: validate username/password, reject inactive users, set secure HttpOnly SameSite=Lax cookie, return `204`.\n- `/api/v1/auth/logout`: clear cookie, return `204`.\n- `/api/v1/auth/me`: return current user JSON per spec.","acceptance_criteria":"- Endpoints match spec response shapes/status codes.\n- Unit tests cover auth logic and cookie settings.\n- Integration tests cover login/logout/me behavior end-to-end against Postgres.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T11:29:24.579222-05:00","updated_at":"2025-12-13T17:01:42.620546-05:00","closed_at":"2025-12-13T17:01:42.620546-05:00","dependencies":[{"issue_id":"cooking_app-6aa","depends_on_id":"cooking_app-hz4","type":"parent-child","created_at":"2025-12-13T11:34:56.899897-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-6aa","depends_on_id":"cooking_app-qno","type":"blocks","created_at":"2025-12-13T11:36:17.564671-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-6aa","depends_on_id":"cooking_app-h12","type":"blocks","created_at":"2025-12-13T11:36:17.56956-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-6jt","title":"CLI: config path","description":"Add cookctl config path command to print config file path.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T22:48:57.009616-05:00","updated_at":"2025-12-22T22:50:08.21316-05:00","closed_at":"2025-12-22T22:50:08.21316-05:00"}
{"id":"cooking_app-6jt.1","title":"CLI: config path command","description":"Implement config path command output.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T22:49:02.433619-05:00","updated_at":"2025-12-22T22:49:59.27835-05:00","closed_at":"2025-12-22T22:49:59.27835-05:00","dependencies":[{"issue_id":"cooking_app-6jt.1","depends_on_id":"cooking_app-6jt","type":"parent-child","created_at":"2025-12-22T22:49:02.4348-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-6jt.2","title":"CLI: config path tests","description":"Add unit tests for config path command.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T22:49:07.803566-05:00","updated_at":"2025-12-22T22:50:04.14928-05:00","closed_at":"2025-12-22T22:50:04.14928-05:00","dependencies":[{"issue_id":"cooking_app-6jt.2","depends_on_id":"cooking_app-6jt","type":"parent-child","created_at":"2025-12-22T22:49:07.804076-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-6lu","title":"CLI: design companion API client tool","description":"Design a companion CLI tool for the cooking app API that uses PAT auth, produce a product document, and review it with the oracle.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T20:17:08.828079-05:00","updated_at":"2025-12-22T20:37:10.005154-05:00","closed_at":"2025-12-22T20:37:10.005154-05:00"}
{"id":"cooking_app-6rv","title":"Backend: centralize item/aisle response helpers","description":"Move groceryAisleResponse/itemResponse and buildAisleResponse/buildItemResponse into a shared httpapi module to reduce cross-file coupling.","acceptance_criteria":"Shared helpers live in a dedicated file; recipes/items/shopping list handlers import it; tests pass.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T21:02:35.479967-05:00","created_by":"saiaj","updated_at":"2025-12-30T18:26:15.45572-05:00","closed_at":"2025-12-30T18:26:15.45572-05:00","close_reason":"Moved item/aisle response helpers to shared httpapi module","dependencies":[{"issue_id":"cooking_app-6rv","depends_on_id":"cooking_app-73v.3","type":"discovered-from","created_at":"2025-12-29T21:02:35.480816-05:00","created_by":"daemon"}]}
{"id":"cooking_app-6xm","title":"Frontend: Add meal plan calendar tab","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-23T09:29:33.572344-05:00","updated_at":"2025-12-23T09:44:33.994802-05:00","closed_at":"2025-12-23T09:44:33.994802-05:00"}
{"id":"cooking_app-6y1","title":"QA: run backend-ci for cookctl scaffold","description":"Run make backend-ci after cookctl scaffold changes; report any failures and fix as needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T04:45:31.231174-05:00","updated_at":"2025-12-23T04:45:52.104773-05:00","closed_at":"2025-12-23T04:45:52.104773-05:00","dependencies":[{"issue_id":"cooking_app-6y1","depends_on_id":"cooking_app-6lu","type":"discovered-from","created_at":"2025-12-23T04:45:31.233432-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-73v","title":"Items + shopping lists","description":"Introduce global items, aisle ordering, and snapshot shopping lists with item aggregation. Includes schema, API, UI, and CLI updates.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-28T16:35:03.087244-05:00","updated_at":"2025-12-30T20:08:01.295588-05:00","closed_at":"2025-12-30T20:08:01.295588-05:00","close_reason":"Completed items + shopping lists workstream"}
{"id":"cooking_app-73v.1","title":"Backend: items/aisles/shopping list schema","description":"Add items, grocery_aisles, shopping_lists, shopping_list_items tables; add recipe_ingredients.item_id with backfill and indexes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T16:35:19.578382-05:00","updated_at":"2025-12-28T16:39:24.233293-05:00","closed_at":"2025-12-28T16:39:24.233293-05:00","dependencies":[{"issue_id":"cooking_app-73v.1","depends_on_id":"cooking_app-73v","type":"parent-child","created_at":"2025-12-28T16:35:19.579543-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-73v.10","title":"CLI: shopping list commands + output","description":"Add cookctl shopping list commands (list/create/get/update/delete, items add/from-recipes/from-meal-plan, purchase toggle, item delete) with table/json output.","acceptance_criteria":"Commands mirror API endpoints; JSON output is concise; tests cover usage errors and JSON output; help text updated.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-29T21:02:33.545634-05:00","created_by":"saiaj","updated_at":"2025-12-30T06:51:35.926194-05:00","closed_at":"2025-12-30T06:51:35.926194-05:00","close_reason":"Completed","dependencies":[{"issue_id":"cooking_app-73v.10","depends_on_id":"cooking_app-73v","type":"parent-child","created_at":"2025-12-29T21:02:33.548132-05:00","created_by":"daemon"}]}
{"id":"cooking_app-73v.2","title":"Backend: items + aisles API","description":"CRUD + search endpoints for items and grocery aisles; enforce global uniqueness; expose store_url and aisle ordering.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-28T16:35:24.028827-05:00","updated_at":"2025-12-29T20:22:30.43016-05:00","closed_at":"2025-12-29T20:22:30.43016-05:00","close_reason":"Implemented items and aisles API endpoints/tests","dependencies":[{"issue_id":"cooking_app-73v.2","depends_on_id":"cooking_app-73v","type":"parent-child","created_at":"2025-12-28T16:35:24.030178-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-73v.2","depends_on_id":"cooking_app-73v.1","type":"blocks","created_at":"2025-12-28T16:35:51.822765-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-73v.3","title":"Backend: shopping list API + aggregation","description":"Create snapshot shopping lists, add items/recipes in bulk, and aggregate quantities by item+unit; allow purchase toggles.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-28T16:35:27.066462-05:00","updated_at":"2025-12-29T20:57:27.980205-05:00","closed_at":"2025-12-29T20:57:27.980205-05:00","close_reason":"Implemented shopping list API, aggregation, and tests","dependencies":[{"issue_id":"cooking_app-73v.3","depends_on_id":"cooking_app-73v","type":"parent-child","created_at":"2025-12-28T16:35:27.067722-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-73v.3","depends_on_id":"cooking_app-73v.1","type":"blocks","created_at":"2025-12-28T16:35:58.990877-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-73v.4","title":"Backend: recipe ingredient item integration","description":"Update recipe ingredient upsert/response to use item_id + item_name; auto-create items; update OpenAPI + sqlc queries.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T16:35:30.437614-05:00","updated_at":"2025-12-29T20:04:59.43618-05:00","closed_at":"2025-12-29T20:04:59.43618-05:00","close_reason":"Recipe ingredient upserts now use item_id/item_name and responses return structured item details.","dependencies":[{"issue_id":"cooking_app-73v.4","depends_on_id":"cooking_app-73v","type":"parent-child","created_at":"2025-12-28T16:35:30.439313-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-73v.4","depends_on_id":"cooking_app-73v.1","type":"blocks","created_at":"2025-12-28T16:36:02.148251-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-73v.5","title":"Frontend: items management + ingredient typeahead","description":"Add items page, aisle assignment, store link; update recipe editor to typeahead + create new items.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-28T16:35:33.989809-05:00","updated_at":"2025-12-30T18:19:50.117473-05:00","closed_at":"2025-12-30T18:19:50.117473-05:00","close_reason":"Completed","dependencies":[{"issue_id":"cooking_app-73v.5","depends_on_id":"cooking_app-73v","type":"parent-child","created_at":"2025-12-28T16:35:33.991995-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-73v.5","depends_on_id":"cooking_app-73v.2","type":"blocks","created_at":"2025-12-28T16:36:05.340549-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-73v.5","depends_on_id":"cooking_app-73v.4","type":"blocks","created_at":"2025-12-28T16:36:08.106276-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-73v.6","title":"Frontend: shopping list flows","description":"Create shopping list pages, add items/bulk add from recipe + meal plan, purchase toggles, aisle grouping.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-28T16:35:37.148213-05:00","updated_at":"2025-12-30T18:19:53.801575-05:00","closed_at":"2025-12-30T18:19:53.801575-05:00","close_reason":"Completed","dependencies":[{"issue_id":"cooking_app-73v.6","depends_on_id":"cooking_app-73v","type":"parent-child","created_at":"2025-12-28T16:35:37.149448-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-73v.6","depends_on_id":"cooking_app-73v.3","type":"blocks","created_at":"2025-12-28T16:36:11.91802-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-73v.7","title":"CLI: items management + search","description":"Add cookctl items list/search/create/update/delete with JSON output.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-28T16:35:40.136782-05:00","updated_at":"2025-12-30T06:51:30.204786-05:00","closed_at":"2025-12-30T06:51:30.204786-05:00","close_reason":"Completed","dependencies":[{"issue_id":"cooking_app-73v.7","depends_on_id":"cooking_app-73v","type":"parent-child","created_at":"2025-12-28T16:35:40.138275-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-73v.7","depends_on_id":"cooking_app-73v.2","type":"blocks","created_at":"2025-12-28T16:36:14.859756-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-73v.8","title":"QA/docs: items + shopping lists","description":"Add backend/frontend tests and update docs/OpenAPI examples; run linters/formatters.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T16:35:42.95627-05:00","updated_at":"2025-12-30T20:07:56.912891-05:00","closed_at":"2025-12-30T20:07:56.912891-05:00","close_reason":"Ran backend/frontend CI and fixed lint/test issues","dependencies":[{"issue_id":"cooking_app-73v.8","depends_on_id":"cooking_app-73v","type":"parent-child","created_at":"2025-12-28T16:35:42.957351-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-73v.8","depends_on_id":"cooking_app-73v.2","type":"blocks","created_at":"2025-12-28T16:36:19.030297-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-73v.8","depends_on_id":"cooking_app-73v.3","type":"blocks","created_at":"2025-12-28T16:36:21.668067-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-73v.8","depends_on_id":"cooking_app-73v.5","type":"blocks","created_at":"2025-12-28T16:36:24.4632-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-73v.8","depends_on_id":"cooking_app-73v.6","type":"blocks","created_at":"2025-12-28T16:36:26.595622-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-73v.8","depends_on_id":"cooking_app-73v.7","type":"blocks","created_at":"2025-12-28T16:36:28.722349-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-73v.9","title":"CLI: shopping list client support","description":"Add cookctl client methods for shopping list CRUD, list items, add items, add from recipes/meal plan, purchase update, and delete.","acceptance_criteria":"Client exposes typed methods with tests for each endpoint and error mapping; respects auth token; JSON output supported.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T21:02:31.392946-05:00","created_by":"saiaj","updated_at":"2025-12-30T06:51:33.59779-05:00","closed_at":"2025-12-30T06:51:33.59779-05:00","close_reason":"Completed","dependencies":[{"issue_id":"cooking_app-73v.9","depends_on_id":"cooking_app-73v","type":"parent-child","created_at":"2025-12-29T21:02:31.395496-05:00","created_by":"daemon"}]}
{"id":"cooking_app-7dz","title":"Backend: return item details on shopping list purchase update","description":"Extend UpdateShoppingListItemPurchased query to return item + aisle details so the handler avoids an extra GetItemByID lookup.","acceptance_criteria":"SQL query returns item/aisle columns; handler uses row directly; extra query removed; tests updated.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T21:02:37.532469-05:00","created_by":"saiaj","updated_at":"2025-12-30T18:26:18.290855-05:00","closed_at":"2025-12-30T18:26:18.290855-05:00","close_reason":"Update purchase query to return item/aisle details and use direct response","dependencies":[{"issue_id":"cooking_app-7dz","depends_on_id":"cooking_app-73v.3","type":"discovered-from","created_at":"2025-12-29T21:02:37.533366-05:00","created_by":"daemon"}]}
{"id":"cooking_app-7eq","title":"Dev: Load .env.dev for local compose and Playwright","description":"Use .env.dev for local docker compose commands and Playwright config/setup, and add tests for env loading helper.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T16:03:55.404897-05:00","updated_at":"2025-12-21T16:09:30.656575-05:00","closed_at":"2025-12-21T16:09:30.656575-05:00"}
{"id":"cooking_app-7k6","title":"CLI: document api url override field","description":"Add a brief comment explaining the apiURLOverride field in the cookctl App struct.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T23:42:18.898374-05:00","updated_at":"2025-12-22T23:42:28.431662-05:00","closed_at":"2025-12-22T23:42:28.431662-05:00"}
{"id":"cooking_app-7ko","title":"MVP v1 epic: Frontend app shell and core screens","description":"Build the React + TypeScript + Vite frontend per `personal-recipe-app-spec.md`, including routing, auth flow, and core CRUD screens.\n\nSpec references:\n- `personal-recipe-app-spec.md` section 4.1 (Screens), 10 (Frontend spec), 14 (Acceptance criteria).\n\nScope:\n- React Router routes and AppShell/TopNav navigation.\n- Login flow using backend sessions.\n- Recipes list/detail/create/edit flows.\n- Books/tags management.\n- Settings: PAT management + user management.\n\nNon-goals:\n- Offline support (explicitly out of scope for v1).","acceptance_criteria":"- All child issues under this epic are completed and meet their own acceptance criteria.\n- `make frontend-ci` passes (format check, eslint, build/typecheck).","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T11:26:37.63048-05:00","updated_at":"2025-12-13T21:51:36.298223-05:00","closed_at":"2025-12-13T21:51:36.298223-05:00"}
{"id":"cooking_app-7xy","title":"CLI: cookctl recipe usability improvements","description":"Deliver cookctl recipe UX improvements: interactive create/template, richer output, filters, bulk ops, fuzzy lookup/clone, and preflight validation.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-28T15:45:34.924789-05:00","updated_at":"2025-12-28T16:19:46.575282-05:00","closed_at":"2025-12-28T16:19:46.575282-05:00"}
{"id":"cooking_app-7xy.1","title":"CLI: interactive recipe create and templates","description":"Add interactive prompts for full recipe creation and a template command/output to seed JSON payloads.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-28T15:45:50.624107-05:00","updated_at":"2025-12-28T16:19:20.688179-05:00","closed_at":"2025-12-28T16:19:20.688179-05:00","dependencies":[{"issue_id":"cooking_app-7xy.1","depends_on_id":"cooking_app-7xy","type":"parent-child","created_at":"2025-12-28T15:45:50.625384-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-7xy.2","title":"CLI: recipe output formatting improvements","description":"Improve table output for recipe detail (ingredients/steps) and keep JSON output consistent for scripting.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-28T15:45:54.63494-05:00","updated_at":"2025-12-28T16:19:25.237025-05:00","closed_at":"2025-12-28T16:19:25.237025-05:00","dependencies":[{"issue_id":"cooking_app-7xy.2","depends_on_id":"cooking_app-7xy","type":"parent-child","created_at":"2025-12-28T15:45:54.636478-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-7xy.3","title":"CLI: recipe list filters by name and servings","description":"Add list filters for tag/book names and servings with client-side resolution when API requires IDs.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-28T15:45:58.011596-05:00","updated_at":"2025-12-28T16:19:29.217328-05:00","closed_at":"2025-12-28T16:19:29.217328-05:00","dependencies":[{"issue_id":"cooking_app-7xy.3","depends_on_id":"cooking_app-7xy","type":"parent-child","created_at":"2025-12-28T15:45:58.01273-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-7xy.4","title":"CLI: recipe bulk operations","description":"Add export/import and tag management commands to streamline batch operations.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-28T15:46:00.804528-05:00","updated_at":"2025-12-28T16:19:33.303354-05:00","closed_at":"2025-12-28T16:19:33.303354-05:00","dependencies":[{"issue_id":"cooking_app-7xy.4","depends_on_id":"cooking_app-7xy","type":"parent-child","created_at":"2025-12-28T15:46:00.805609-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-7xy.5","title":"CLI: recipe QoL improvements","description":"Add fuzzy title lookup, clone command, and list view counts/metadata to speed common workflows.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-28T15:46:04.36725-05:00","updated_at":"2025-12-28T16:19:38.163553-05:00","closed_at":"2025-12-28T16:19:38.163553-05:00","dependencies":[{"issue_id":"cooking_app-7xy.5","depends_on_id":"cooking_app-7xy","type":"parent-child","created_at":"2025-12-28T15:46:04.370077-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-7xy.6","title":"CLI: recipe preflight and validation","description":"Add API connectivity preflight checks and title-duplicate validation with clear error messaging.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T15:46:07.533218-05:00","updated_at":"2025-12-28T16:19:42.187288-05:00","closed_at":"2025-12-28T16:19:42.187288-05:00","dependencies":[{"issue_id":"cooking_app-7xy.6","depends_on_id":"cooking_app-7xy","type":"parent-child","created_at":"2025-12-28T15:46:07.53431-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-8ar","title":"Support local hostname (mDNS/DNS) for nicer HTTPS name","description":"Optionally support a stable local hostname (e.g. `cooking-app.lan`) via router DNS or mDNS and document how to set COOKING_APP_DOMAIN accordingly.","acceptance_criteria":"- Docs cover recommended hostname + DNS options\n- Caddy config supports hostname-based serving as well as raw IP","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-14T20:12:30.518129-05:00","updated_at":"2025-12-18T06:22:26.57459-05:00","closed_at":"2025-12-18T06:22:26.57459-05:00","dependencies":[{"issue_id":"cooking_app-8ar","depends_on_id":"cooking_app-edv","type":"parent-child","created_at":"2025-12-14T20:12:38.926877-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-8g6","title":"CLI: recipe init/edit helpers","description":"Add cookctl recipe init/edit helpers for upsert payloads.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T22:36:58.006738-05:00","updated_at":"2025-12-22T22:40:27.287946-05:00","closed_at":"2025-12-22T22:40:27.287946-05:00"}
{"id":"cooking_app-8g6.1","title":"CLI: recipe init/edit logic","description":"Implement recipe init and edit transformations to upsert payloads.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:37:03.713061-05:00","updated_at":"2025-12-22T22:44:18.863421-05:00","closed_at":"2025-12-22T22:44:18.863421-05:00","dependencies":[{"issue_id":"cooking_app-8g6.1","depends_on_id":"cooking_app-8g6","type":"parent-child","created_at":"2025-12-22T22:37:03.714251-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-8g6.2","title":"CLI: recipe init/edit tests","description":"Add unit tests for recipe init/edit helpers.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:37:08.440068-05:00","updated_at":"2025-12-22T22:44:23.785336-05:00","closed_at":"2025-12-22T22:44:23.785336-05:00","dependencies":[{"issue_id":"cooking_app-8g6.2","depends_on_id":"cooking_app-8g6","type":"parent-child","created_at":"2025-12-22T22:37:08.440943-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-8j4","title":"Recipe detail: show error when delete/restore fails","description":"If delete/restore mutations fail on recipe detail, display an error message and avoid navigating away; add tests for failure paths.","status":"closed","priority":4,"issue_type":"bug","created_at":"2025-12-13T22:41:45.055353-05:00","updated_at":"2025-12-13T22:44:27.312746-05:00","closed_at":"2025-12-13T22:44:27.312746-05:00"}
{"id":"cooking_app-92s","title":"CLI: allow auth set --api-url","description":"Support per-command --api-url on auth set so stored credentials can target a different base URL.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T23:22:49.324627-05:00","updated_at":"2025-12-22T23:23:57.630718-05:00","closed_at":"2025-12-22T23:23:57.630718-05:00"}
{"id":"cooking_app-9hh","title":"Docs: mention cookctl completions in README","description":"Add a brief README note that cookctl supports shell completions and link to docs/cookctl.md.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T23:18:34.702567-05:00","updated_at":"2025-12-22T23:18:47.18815-05:00","closed_at":"2025-12-22T23:18:47.18815-05:00"}
{"id":"cooking_app-9jq","title":"Tooling: add ast-grep rule for httpapi auth guards","description":"Add ast-grep rule(s) for Go httpapi handlers to ensure protected endpoints include auth guards; allowlist healthz/login; integrate into backend checks.","acceptance_criteria":"Rule exists and documented; check wired into backend-ci or a new make target; public endpoints allowlisted.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T21:02:29.336553-05:00","created_by":"saiaj","updated_at":"2025-12-30T18:32:01.824807-05:00","closed_at":"2025-12-30T18:32:01.824807-05:00","close_reason":"Added backend ast-grep auth guard rule, wired into lint, documented","dependencies":[{"issue_id":"cooking_app-9jq","depends_on_id":"cooking_app-73v.3","type":"discovered-from","created_at":"2025-12-29T21:02:29.33797-05:00","created_by":"daemon"}]}
{"id":"cooking_app-9kh","title":"CLI: support --help flag","description":"Allow cookctl --help/-h to print usage without requiring the help subcommand.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T23:37:12.376852-05:00","updated_at":"2025-12-22T23:37:21.672543-05:00","closed_at":"2025-12-22T23:37:21.672543-05:00"}
{"id":"cooking_app-9yf","title":"Recipe detail/editor: prevent editing deleted recipe (guide restore)","description":"If a recipe is soft-deleted, the UI should not offer Edit/Save actions that will fail with 409; instead guide the user to restore first.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-13T22:06:39.250802-05:00","updated_at":"2025-12-13T22:12:01.433557-05:00","closed_at":"2025-12-13T22:12:01.433557-05:00"}
{"id":"cooking_app-9zw","title":"Recipe detail: render notes with preserved newlines","description":"Display recipe notes using `white-space: pre-wrap` so newlines are preserved. Add/update tests.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T23:04:25.048294-05:00","updated_at":"2025-12-13T23:07:20.068491-05:00","closed_at":"2025-12-13T23:07:20.068491-05:00"}
{"id":"cooking_app-a83","title":"CLI: Add meal planner commands","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-23T12:21:49.911853-05:00","updated_at":"2025-12-23T12:33:44.492555-05:00","closed_at":"2025-12-23T12:33:44.492555-05:00"}
{"id":"cooking_app-a9a","title":"Deployment: Add production backend Dockerfile for deploy/compose.yaml","description":"`deploy/compose.yaml` builds the backend service from `../backend` but the repo only has `backend/Dockerfile.dev`. Add a production `backend/Dockerfile` so the production compose skeleton can build the API image.","acceptance_criteria":"- `backend/Dockerfile` exists and builds the API binary.\n- `deploy/compose.yaml` can build the backend service without needing Dockerfile overrides.\n- `make ci` passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T21:56:29.250476-05:00","updated_at":"2025-12-13T21:57:31.412059-05:00","closed_at":"2025-12-13T21:57:31.412059-05:00"}
{"id":"cooking_app-am7","title":"CLI: user commands","description":"Add cookctl user list/create/deactivate commands with PAT auth.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T22:23:10.619188-05:00","updated_at":"2025-12-22T22:26:42.955478-05:00","closed_at":"2025-12-22T22:26:42.955478-05:00"}
{"id":"cooking_app-am7.1","title":"CLI: user client support","description":"Add user list/create/deactivate API calls to cookctl client.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:23:14.296042-05:00","updated_at":"2025-12-22T22:26:33.206608-05:00","closed_at":"2025-12-22T22:26:33.206608-05:00","dependencies":[{"issue_id":"cooking_app-am7.1","depends_on_id":"cooking_app-am7","type":"parent-child","created_at":"2025-12-22T22:23:14.296489-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-am7.2","title":"CLI: user commands and output","description":"Implement cookctl user commands with table/json output and confirmation handling.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:23:17.881511-05:00","updated_at":"2025-12-22T22:26:36.576844-05:00","closed_at":"2025-12-22T22:26:36.576844-05:00","dependencies":[{"issue_id":"cooking_app-am7.2","depends_on_id":"cooking_app-am7","type":"parent-child","created_at":"2025-12-22T22:23:17.889341-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-am7.3","title":"CLI: user command tests","description":"Add unit tests for user commands.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:23:21.154362-05:00","updated_at":"2025-12-22T22:26:39.776392-05:00","closed_at":"2025-12-22T22:26:39.776392-05:00","dependencies":[{"issue_id":"cooking_app-am7.3","depends_on_id":"cooking_app-am7","type":"parent-child","created_at":"2025-12-22T22:23:21.15611-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-apq","title":"CLI: show next_cursor in recipe list table output","description":"When output format is table for recipe list, append next_cursor line if present to aid pagination. Update docs and add tests.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-23T04:38:51.756834-05:00","updated_at":"2025-12-23T04:39:41.654764-05:00","closed_at":"2025-12-23T04:39:41.654764-05:00","dependencies":[{"issue_id":"cooking_app-apq","depends_on_id":"cooking_app-6lu","type":"discovered-from","created_at":"2025-12-23T04:38:51.758198-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-atz","title":"Backend: Standardize API error responses + validation helpers (problem-style JSON)","description":"Add shared HTTP helpers for consistent error responses and request validation.\n\nSpec references:\n- `personal-recipe-app-spec.md` section 8.1 (Errors: JSON problem-style example).\n\nImplementation notes:\n- Provide helpers to write JSON errors with `code`, `message`, and optional `details`.\n- Ensure correct content-type (`application/json; charset=utf-8`) and status codes.\n- Ensure handlers can return validation errors consistently (e.g., missing title, invalid servings).","acceptance_criteria":"- A shared error/response package exists and is used by at least one endpoint.\n- Add unit tests for error serialization and content type/status correctness.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T11:27:28.604403-05:00","updated_at":"2025-12-13T12:15:45.123724-05:00","closed_at":"2025-12-13T12:15:45.123724-05:00","dependencies":[{"issue_id":"cooking_app-atz","depends_on_id":"cooking_app-dcn","type":"parent-child","created_at":"2025-12-13T11:34:47.252624-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-awb","title":"Build: add cookctl build target","description":"Add a backend Makefile target that builds cookctl with version ldflags and update docs to show usage.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T23:11:42.459403-05:00","updated_at":"2025-12-22T23:12:33.136325-05:00","closed_at":"2025-12-22T23:12:33.136325-05:00"}
{"id":"cooking_app-axb","title":"Recipe editor: support ingredient notes/original text inputs","description":"Expose ingredient-level `notes` and `original_text` fields in the recipe editor UI and ensure they are included in create/update payloads.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-13T22:22:09.395486-05:00","updated_at":"2025-12-13T22:24:34.063494-05:00","closed_at":"2025-12-13T22:24:34.063494-05:00"}
{"id":"cooking_app-b09","title":"Frontend: Audit and fix systemic input overlap","description":"Investigate overlapping form controls across pages, verify with Playwright, and apply a systemic box-sizing/layout fix.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T16:14:08.930726-05:00","updated_at":"2025-12-21T16:17:51.587781-05:00","closed_at":"2025-12-21T16:17:51.587781-05:00"}
{"id":"cooking_app-b1b","title":"CLI: add completion command","description":"Add cookctl completion output for bash/zsh/fish with tests and docs.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T23:14:26.228582-05:00","updated_at":"2025-12-22T23:18:03.718494-05:00","closed_at":"2025-12-22T23:18:03.718494-05:00"}
{"id":"cooking_app-b3s","title":"Frontend: Enforce apiFetchJSON usage via ast-grep","description":"Add an ast-grep rule to prevent direct fetch usage in frontend source so CSRF handling stays consistent; integrate with existing style-guard linting.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T16:01:20.767549-05:00","updated_at":"2025-12-21T16:01:30.713785-05:00","closed_at":"2025-12-21T16:01:30.713785-05:00"}
{"id":"cooking_app-bq9","title":"Backend recipes: Implement GET /api/v1/recipes list (search, filters, sort, pagination)","description":"Implement the recipes list endpoint with title-only search and required sorting.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 4.5 (Search/sort), 4.6 (Soft delete), 8.7.1 (List recipes).\n\nImplementation notes:\n- Endpoint: `GET /api/v1/recipes?q=\u0026book_id=\u0026tag_id=\u0026include_deleted=`.\n- Defaults: exclude soft-deleted recipes.\n- Sort: `updated_at DESC`.\n- Search: title-only when `q` present; ensure query uses the chosen index strategy (`lower(title)` or trigram).\n- Pagination: cursor pagination recommended; if offset chosen, update `personal-recipe-app-spec.md` (8.7.1) to document final behavior.","acceptance_criteria":"- Endpoint matches spec response shape (`items`, `next_cursor`) and behaviors (or `personal-recipe-app-spec.md` updated to match).\n- Unit tests cover parameter validation and response shaping.\n- Integration tests cover: default excludes deleted, include_deleted works, q search works, filter by book/tag, and ordering by updated_at.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T11:30:45.145072-05:00","updated_at":"2025-12-13T21:24:46.620659-05:00","closed_at":"2025-12-13T21:24:46.620659-05:00","dependencies":[{"issue_id":"cooking_app-bq9","depends_on_id":"cooking_app-2iw","type":"parent-child","created_at":"2025-12-13T11:35:07.338008-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-bq9","depends_on_id":"cooking_app-m04","type":"blocks","created_at":"2025-12-13T11:36:31.790228-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-bq9","depends_on_id":"cooking_app-h12","type":"blocks","created_at":"2025-12-13T11:36:31.808395-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-brc","title":"Frontend recipes: Implement /recipes/:id detail screen","description":"Implement recipe detail view optimized for reading.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 4.2 (Recipe requirements), 8.7.2 (Get recipe detail), 10.1 (UX).\n\nImplementation notes:\n- Fetch from `GET /api/v1/recipes/{id}`.\n- Display title, times, servings, source URL, notes, tags, ingredients, steps.\n- Provide actions: edit, delete (soft delete).\n- Handle 404 and loading states gracefully.","acceptance_criteria":"- Screen renders data from the API and matches the spec’s required fields.\n- Delete action triggers soft delete and returns user to list (or updates state) consistent with v1 UX.\n- Add component tests for loading, error, and successful render.\n- Run `make frontend-format` and ensure `make frontend-ci` (and `npm run test` if present) passes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T11:32:52.360102-05:00","updated_at":"2025-12-13T21:41:03.137737-05:00","closed_at":"2025-12-13T21:41:03.137737-05:00","dependencies":[{"issue_id":"cooking_app-brc","depends_on_id":"cooking_app-7ko","type":"parent-child","created_at":"2025-12-13T11:35:22.145339-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-brc","depends_on_id":"cooking_app-uln","type":"blocks","created_at":"2025-12-13T11:37:09.044346-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-brc","depends_on_id":"cooking_app-hm9","type":"blocks","created_at":"2025-12-13T11:37:09.052632-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-brc","depends_on_id":"cooking_app-els","type":"blocks","created_at":"2025-12-13T11:37:09.073598-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-brc","depends_on_id":"cooking_app-rmu","type":"blocks","created_at":"2025-12-13T11:37:09.077985-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-brp","title":"Recipes list: show per-item restoring state","description":"When restoring a deleted recipe from the list, disable only that row’s Restore button and show a loading label (e.g. “Restoring…”). Other rows remain interactive. Add/adjust tests.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T22:45:09.044068-05:00","updated_at":"2025-12-13T22:50:31.835309-05:00","closed_at":"2025-12-13T22:50:31.835309-05:00"}
{"id":"cooking_app-c7p","title":"Chore: prepare cookctl scaffold commits","description":"Prepare commit(s) for cookctl scaffold changes with explicit path lists and beads sync. Provide commands; execute only on approval.","status":"in_progress","priority":2,"issue_type":"chore","created_at":"2025-12-23T04:47:33.02282-05:00","updated_at":"2025-12-23T04:47:40.894178-05:00","dependencies":[{"issue_id":"cooking_app-c7p","depends_on_id":"cooking_app-6lu","type":"discovered-from","created_at":"2025-12-23T04:47:33.023952-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-ca7","title":"Recipe delete: add confirmation prompt in UI","description":"Prevent accidental deletes by requiring user confirmation before calling DELETE /recipes/:id from the detail page. Add/update tests.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T22:37:44.418706-05:00","updated_at":"2025-12-13T22:40:53.981365-05:00","closed_at":"2025-12-13T22:40:53.981365-05:00"}
{"id":"cooking_app-ccg","title":"CLI: add help command","description":"Add a cookctl help command to print usage for the CLI or a specific command.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T23:32:58.483636-05:00","updated_at":"2025-12-22T23:37:06.160393-05:00","closed_at":"2025-12-22T23:37:06.160393-05:00"}
{"id":"cooking_app-cgh","title":"Cookctl: unify flagset usage and help generation","description":"Create a shared flagset helper (sets output/usage) and unify help text with flag definitions to prevent drift.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T17:21:49.497125-05:00","updated_at":"2025-12-30T20:07:38.84474-05:00","closed_at":"2025-12-30T20:07:38.84474-05:00","close_reason":"Unified flagset helpers and help output"}
{"id":"cooking_app-cr4","title":"Backend recipes: Implement PUT /api/v1/recipes/{id} update (replace semantics, transactional)","description":"Implement recipe update with replace semantics for ingredients/steps/tags.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 8.7.4 (Update recipe), 9.2 (transactional update pattern).\n\nImplementation notes:\n- Transaction pattern: update recipe row, delete and re-insert ingredients/steps, replace recipe_tags, commit.\n- Enforce validation rules same as create.\n- Define behavior when recipe is soft-deleted (reject updates vs allow); update `personal-recipe-app-spec.md` if restrictions differ from expectations.","acceptance_criteria":"- Endpoint updates recipe and returns updated detail response.\n- Operation is transactional (no partial updates if an insert fails).\n- Unit tests cover validation and conflict cases.\n- Integration tests cover update replacing ingredients/steps/tags and updating `updated_at/updated_by`.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T11:30:45.177311-05:00","updated_at":"2025-12-13T21:32:05.475768-05:00","closed_at":"2025-12-13T21:32:05.475768-05:00","dependencies":[{"issue_id":"cooking_app-cr4","depends_on_id":"cooking_app-2iw","type":"parent-child","created_at":"2025-12-13T11:35:07.353485-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-cr4","depends_on_id":"cooking_app-m04","type":"blocks","created_at":"2025-12-13T11:36:41.678045-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-cr4","depends_on_id":"cooking_app-xhj","type":"blocks","created_at":"2025-12-13T11:36:41.684345-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-cr4","depends_on_id":"cooking_app-h12","type":"blocks","created_at":"2025-12-13T11:36:41.689618-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-cvk","title":"Recipe detail: show loading labels for delete/restore actions","description":"On recipe detail, show “Deleting…” / “Restoring…” while the mutation is pending, and clear any previous action error when a new action begins. Add/adjust tests.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T22:45:09.03012-05:00","updated_at":"2025-12-13T22:51:38.742217-05:00","closed_at":"2025-12-13T22:51:38.742217-05:00"}
{"id":"cooking_app-cvl","title":"CLI: PAT bootstrap auth login","description":"Implement cookctl auth login flow with CSRF-aware session bootstrap and PAT storage.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T22:05:31.659175-05:00","updated_at":"2025-12-22T22:10:51.522766-05:00","closed_at":"2025-12-22T22:10:51.522766-05:00"}
{"id":"cooking_app-cvl.1","title":"CLI: auth login tests","description":"Add unit tests for auth login CSRF bootstrap and PAT storage flow.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:05:34.755265-05:00","updated_at":"2025-12-22T22:10:48.52606-05:00","closed_at":"2025-12-22T22:10:48.52606-05:00","dependencies":[{"issue_id":"cooking_app-cvl.1","depends_on_id":"cooking_app-cvl","type":"parent-child","created_at":"2025-12-22T22:05:34.755678-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-d31","title":"CLI: tag commands","description":"Add cookctl tag list/create/update/delete commands with PAT auth.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T22:15:27.146088-05:00","updated_at":"2025-12-22T22:19:50.446029-05:00","closed_at":"2025-12-22T22:19:50.446029-05:00"}
{"id":"cooking_app-d31.1","title":"CLI: tag client support","description":"Add tag list/create/update/delete API calls to cookctl client.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:15:30.517198-05:00","updated_at":"2025-12-22T22:19:37.015599-05:00","closed_at":"2025-12-22T22:19:37.015599-05:00","dependencies":[{"issue_id":"cooking_app-d31.1","depends_on_id":"cooking_app-d31","type":"parent-child","created_at":"2025-12-22T22:15:30.517684-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-d31.2","title":"CLI: tag commands and output","description":"Implement cookctl tag commands with table/json output and confirmation handling.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:15:35.131812-05:00","updated_at":"2025-12-22T22:19:42.547031-05:00","closed_at":"2025-12-22T22:19:42.547031-05:00","dependencies":[{"issue_id":"cooking_app-d31.2","depends_on_id":"cooking_app-d31","type":"parent-child","created_at":"2025-12-22T22:15:35.132304-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-d31.3","title":"CLI: tag command tests","description":"Add unit tests for tag commands.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:15:38.371397-05:00","updated_at":"2025-12-22T22:19:45.320739-05:00","closed_at":"2025-12-22T22:19:45.320739-05:00","dependencies":[{"issue_id":"cooking_app-d31.3","depends_on_id":"cooking_app-d31","type":"parent-child","created_at":"2025-12-22T22:15:38.371847-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-d61","title":"Frontend recipes: Implement /recipes list (search, filters, sort)","description":"Implement the primary recipes list screen.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 4.5 (Search/sort), 8.7.1 (List recipes), 10.1 (UX), 10.2 (routes).\n\nImplementation notes:\n- Show recipes sorted by recently updated.\n- Title-only search input (`q`).\n- Optional filters: book and tag (`book_id`, `tag_id`).\n- Link to recipe detail and edit.","acceptance_criteria":"- Screen renders list from `GET /api/v1/recipes` and supports search/filter interactions.\n- Add component tests (renders list items; search triggers query; empty state).\n- Run `make frontend-format` and ensure `make frontend-ci` (and `npm run test` if present) passes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T11:32:18.05983-05:00","updated_at":"2025-12-13T21:36:22.436543-05:00","closed_at":"2025-12-13T21:36:22.436543-05:00","dependencies":[{"issue_id":"cooking_app-d61","depends_on_id":"cooking_app-7ko","type":"parent-child","created_at":"2025-12-13T11:35:22.171424-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-d61","depends_on_id":"cooking_app-hm9","type":"blocks","created_at":"2025-12-13T11:37:09.058592-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-d61","depends_on_id":"cooking_app-rmu","type":"blocks","created_at":"2025-12-13T11:37:09.063823-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-d61","depends_on_id":"cooking_app-bq9","type":"blocks","created_at":"2025-12-13T11:37:09.06889-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-d8o","title":"Recipe detail: show ingredient notes/original text when present","description":"When ingredient notes or original_text are present, show them in the ingredients list on the recipe detail page.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T22:28:51.187354-05:00","updated_at":"2025-12-13T22:30:49.969667-05:00","closed_at":"2025-12-13T22:30:49.969667-05:00"}
{"id":"cooking_app-dcj","title":"Docs: complete oracle review of cookctl product doc","description":"Run oracle review for cookctl product doc and capture findings. Update history/cooking-cli-product.md if needed based on feedback, and summarize outcomes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T04:20:11.753596-05:00","updated_at":"2025-12-23T04:21:33.22234-05:00","closed_at":"2025-12-23T04:21:33.22234-05:00","dependencies":[{"issue_id":"cooking_app-dcj","depends_on_id":"cooking_app-6lu","type":"discovered-from","created_at":"2025-12-23T04:20:11.755975-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-dcn","title":"MVP v1 epic: Backend foundation (DB, migrations, data access)","description":"Build the backend foundation required by `personal-recipe-app-spec.md` to support the MVP data model + REST API.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 6.1 (Backend stack), 7 (Data model), 9 (Backend implementation details), 13 (Backend testing requirements).\n\nScope:\n- Standardize on a migrations tool and add repo targets/docs for applying migrations.\n- Implement the full Postgres schema required for v1 (users, recipes, ingredients, steps, tags, recipe_books, recipe_tags, personal_access_tokens).\n- Establish a type-safe query/data-access layer (prefer `sqlc` as recommended) and DB connection wiring for the API.\n- Provide baseline API error format and DB transaction patterns to support feature work.\n\nNon-goals:\n- Implementing any of the user-facing endpoints beyond what is required to validate the foundation (those are tracked in child issues).","acceptance_criteria":"- All child issues under this epic are completed and meet their own acceptance criteria.\n- `personal-recipe-app-spec.md` is updated if any foundation decisions/implementation differ from the spec recommendations (with rationale).\n- `make backend-ci` passes (fmt, vet, lint, tests).","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T11:26:16.537567-05:00","updated_at":"2025-12-13T21:51:36.286926-05:00","closed_at":"2025-12-13T21:51:36.286926-05:00","labels":["backend","db","migrations","sqlc"]}
{"id":"cooking_app-di8","title":"Cookctl: standardize usage errors","description":"Introduce helpers for usage errors (stderr message + exitUsage) to keep messaging consistent across run* handlers.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-28T17:21:55.785679-05:00","updated_at":"2025-12-30T20:07:52.664838-05:00","closed_at":"2025-12-30T20:07:52.664838-05:00","close_reason":"Added usage error helpers and standardized usage errors"}
{"id":"cooking_app-dmd","title":"Spec: Fix deploy/compose.yaml relative paths example","description":"`personal-recipe-app-spec.md` section 11.4 references `deploy/compose.yaml` but uses volume paths as if the compose file were at repo root. Update the example to match actual relative paths for a compose file in `deploy/`.","acceptance_criteria":"- Spec section 11.4 volume paths match `deploy/compose.yaml` semantics (relative to `deploy/`).\n- `make ci` passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T21:59:06.209619-05:00","updated_at":"2025-12-13T21:59:59.288192-05:00","closed_at":"2025-12-13T21:59:59.288192-05:00"}
{"id":"cooking_app-doe","title":"Recipes list: show updated_at in meta line","description":"In the recipes list per-item meta line, also show the last updated timestamp from `updated_at` (stable string display). Update tests.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T23:04:25.065694-05:00","updated_at":"2025-12-13T23:05:24.071086-05:00","closed_at":"2025-12-13T23:05:24.071086-05:00"}
{"id":"cooking_app-dsl","title":"Cookctl: centralize command registry for help/completions","description":"Introduce a command registry (name, synopsis, run func, usage func, subcommands) to generate help output and completion scripts from one source and reduce drift.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T17:21:43.589076-05:00","updated_at":"2025-12-30T20:07:44.318689-05:00","closed_at":"2025-12-30T20:07:44.318689-05:00","close_reason":"Added command registry for help/completions"}
{"id":"cooking_app-dt7","title":"CLI: fix cookctl lint compliance","description":"Fix cookctl lint warnings (errcheck, gosec, staticcheck) and keep backend-lint green.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T23:02:55.134748-05:00","updated_at":"2025-12-22T23:03:03.624835-05:00","closed_at":"2025-12-22T23:03:03.624835-05:00"}
{"id":"cooking_app-dyg","title":"Deploy: bootstrap default admin on production deploy","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T15:03:19.452267-05:00","updated_at":"2025-12-28T15:07:41.511009-05:00","closed_at":"2025-12-28T15:07:41.511009-05:00"}
{"id":"cooking_app-dyx","title":"CLI: token commands","description":"Add cookctl token list/create/revoke commands with PAT auth.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T22:11:47.742536-05:00","updated_at":"2025-12-22T22:14:57.396649-05:00","closed_at":"2025-12-22T22:14:57.396649-05:00"}
{"id":"cooking_app-dyx.1","title":"CLI: token client support","description":"Add token list/create/revoke API calls to cookctl client.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:11:51.554123-05:00","updated_at":"2025-12-22T22:14:47.452657-05:00","closed_at":"2025-12-22T22:14:47.452657-05:00","dependencies":[{"issue_id":"cooking_app-dyx.1","depends_on_id":"cooking_app-dyx","type":"parent-child","created_at":"2025-12-22T22:11:51.554577-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-dyx.2","title":"CLI: token commands and output","description":"Implement cookctl token commands with table/json output and confirmation handling.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:11:54.742588-05:00","updated_at":"2025-12-22T22:14:51.643614-05:00","closed_at":"2025-12-22T22:14:51.643614-05:00","dependencies":[{"issue_id":"cooking_app-dyx.2","depends_on_id":"cooking_app-dyx","type":"parent-child","created_at":"2025-12-22T22:11:54.743054-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-dyx.3","title":"CLI: token command tests","description":"Add unit tests for token commands.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:11:58.528591-05:00","updated_at":"2025-12-22T22:14:54.704182-05:00","closed_at":"2025-12-22T22:14:54.704182-05:00","dependencies":[{"issue_id":"cooking_app-dyx.3","depends_on_id":"cooking_app-dyx","type":"parent-child","created_at":"2025-12-22T22:11:58.529064-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-dzu","title":"Deployment: Add production Docker Compose + Caddy config skeleton (TLS via DNS-01)","description":"Add production-oriented deployment artifacts aligned with the spec.\n\nSpec references:\n- `personal-recipe-app-spec.md` section 11 (Deployment specification), 11.3 (DNS-01 requirement), 11.4–11.5 (compose/Caddyfile skeleton).\n\nImplementation notes:\n- Add a `deploy/` directory containing:\n  - production compose file (e.g., `deploy/compose.yaml`)\n  - `Caddyfile` template supporting static frontend + reverse proxy to API under `/api/*`\n  - env var documentation for DB creds, session secret, and DNS provider creds\n- Keep existing `compose.yaml` as the dev stack.","acceptance_criteria":"- Production deployment artifacts exist and match spec intent.\n- If filenames/paths/variables differ from the spec skeleton, update `personal-recipe-app-spec.md` to reflect the final structure.\n- Add basic automated checks where applicable (e.g., YAML syntax validation).\n- Ensure `make ci` passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T11:33:53.088964-05:00","updated_at":"2025-12-13T21:51:00.401377-05:00","closed_at":"2025-12-13T21:51:00.401377-05:00","dependencies":[{"issue_id":"cooking_app-dzu","depends_on_id":"cooking_app-5qy","type":"parent-child","created_at":"2025-12-13T11:35:27.059509-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-e3h","title":"Backend recipe books: Implement /api/v1/recipe-books CRUD endpoints","description":"Implement Recipe Books CRUD endpoints.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 4.3 (Recipe books), 7.2.2 (`recipe_books`), 8.5 (Recipe Books endpoints).\n\nImplementation notes:\n- Endpoints: `GET/POST/PUT/DELETE /api/v1/recipe-books`.\n- Enforce auth.\n- Delete semantics: spec notes to consider preventing delete if recipes exist or set `recipe_book_id` null; choose one and update `personal-recipe-app-spec.md` to reflect the behavior.\n- Ensure names are unique (case-insensitive per schema decision).","acceptance_criteria":"- Endpoints exist and behave as documented in the spec (or `personal-recipe-app-spec.md` updated to match final behavior).\n- Unit tests cover validation and error responses.\n- Integration tests cover create/list/update/delete scenarios, including delete behavior with existing recipes.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T11:30:45.161821-05:00","updated_at":"2025-12-13T19:43:31.089918-05:00","closed_at":"2025-12-13T19:43:31.089918-05:00","dependencies":[{"issue_id":"cooking_app-e3h","depends_on_id":"cooking_app-2iw","type":"parent-child","created_at":"2025-12-13T11:35:07.357929-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-e3h","depends_on_id":"cooking_app-h12","type":"blocks","created_at":"2025-12-13T11:36:31.778823-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-e3h","depends_on_id":"cooking_app-m04","type":"blocks","created_at":"2025-12-13T11:36:31.784722-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-edv","title":"LAN HTTPS support for production deploy","description":"Support HTTPS for LAN deployments (no public domain) with a predictable workflow: serve HTTPS on 443, keep HTTP available as fallback, and provide a way to trust the local CA on client devices.","acceptance_criteria":"- `https://\u003clan-ip\u003e/` works and serves the app\n- HTTP remains available (no forced redirect) unless explicitly enabled\n- Document and/or automate trusting the local CA for common clients (macOS/Windows/iOS/Android)\n- Deployment script supports enabling/disabling LAN HTTPS","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T20:12:17.564482-05:00","updated_at":"2025-12-18T06:22:47.239808-05:00","closed_at":"2025-12-18T06:22:47.239808-05:00"}
{"id":"cooking_app-els","title":"Backend recipes: Implement GET /api/v1/recipes/{id} detail endpoint","description":"Implement recipe detail endpoint returning full recipe including ingredients, steps, tags, and audit fields.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 4.2 (Recipe requirements), 7.2.4–7.2.7 (recipe tables), 8.7.2 (Get recipe detail).\n\nImplementation notes:\n- Endpoint: `GET /api/v1/recipes/{id}`.\n- Include: recipe fields + tags + ingredients (ordered by position) + steps (ordered by step_number) + audit fields + `deleted_at`.\n- Decide whether soft-deleted recipes are retrievable by default; if restricting, update `personal-recipe-app-spec.md` accordingly.","acceptance_criteria":"- Response JSON matches spec example (or `personal-recipe-app-spec.md` updated to match).\n- Unit tests cover ID parsing and error responses (404 vs 400).\n- Integration tests cover retrieving a recipe with ingredients/steps/tags ordering.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T11:30:45.190675-05:00","updated_at":"2025-12-13T21:16:12.951392-05:00","closed_at":"2025-12-13T21:16:12.951392-05:00","dependencies":[{"issue_id":"cooking_app-els","depends_on_id":"cooking_app-2iw","type":"parent-child","created_at":"2025-12-13T11:35:07.348798-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-els","depends_on_id":"cooking_app-h12","type":"blocks","created_at":"2025-12-13T11:36:31.77101-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-els","depends_on_id":"cooking_app-m04","type":"blocks","created_at":"2025-12-13T11:36:31.804158-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-fg5","title":"Frontend: Fix recipe editor overlap on small screens","description":"Add responsive layout adjustments so the recipe editor fields and action buttons do not overlap on small screens.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T15:52:38.319249-05:00","updated_at":"2025-12-21T15:53:37.544891-05:00","closed_at":"2025-12-21T15:53:37.544891-05:00"}
{"id":"cooking_app-fit","title":"CLI: auth logout revoke","description":"Add cookctl auth logout --revoke to revoke stored token ids and clear credentials.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T22:47:07.692663-05:00","updated_at":"2025-12-22T22:48:38.490777-05:00","closed_at":"2025-12-22T22:48:38.490777-05:00"}
{"id":"cooking_app-fit.1","title":"CLI: auth logout revoke logic","description":"Implement revoke path for auth logout and credential updates.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T22:47:13.156197-05:00","updated_at":"2025-12-22T22:48:30.013114-05:00","closed_at":"2025-12-22T22:48:30.013114-05:00","dependencies":[{"issue_id":"cooking_app-fit.1","depends_on_id":"cooking_app-fit","type":"parent-child","created_at":"2025-12-22T22:47:13.156832-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-fit.2","title":"CLI: auth logout revoke tests","description":"Add unit tests for auth logout revoke behavior.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T22:47:17.946349-05:00","updated_at":"2025-12-22T22:48:34.638744-05:00","closed_at":"2025-12-22T22:48:34.638744-05:00","dependencies":[{"issue_id":"cooking_app-fit.2","depends_on_id":"cooking_app-fit","type":"parent-child","created_at":"2025-12-22T22:47:17.947182-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-fsg","title":"Frontend tags: Implement /tags screen (CRUD)","description":"Implement tags management UI.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 4.4 (Tags), 8.6 (Tags endpoints), 10.2 (routes).\n\nImplementation notes:\n- List tags.\n- Create and rename tags.\n- Delete tags with behavior matching backend/spec decision.\n- Keep UI minimal and mobile-friendly.","acceptance_criteria":"- UI supports list/create/update/delete against backend endpoints.\n- Add component tests for create/delete flows.\n- Run `make frontend-format` and ensure `make frontend-ci` (and `npm run test` if present) passes.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T11:32:52.392698-05:00","updated_at":"2025-12-13T20:21:05.781644-05:00","closed_at":"2025-12-13T20:21:05.781644-05:00","dependencies":[{"issue_id":"cooking_app-fsg","depends_on_id":"cooking_app-7ko","type":"parent-child","created_at":"2025-12-13T11:35:22.175234-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-fsg","depends_on_id":"cooking_app-kht","type":"blocks","created_at":"2025-12-13T11:37:35.595374-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-fsg","depends_on_id":"cooking_app-hm9","type":"blocks","created_at":"2025-12-13T11:37:35.618134-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-fsg","depends_on_id":"cooking_app-rmu","type":"blocks","created_at":"2025-12-13T11:37:35.622895-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-fv6","title":"Recipe detail: add Back to recipes link + tag filter links","description":"Add a back-to-list link on recipe detail, and render tags as links to `/recipes?tag_id=...` (include `include_deleted=true` when viewing a deleted recipe).","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T22:31:51.734768-05:00","updated_at":"2025-12-13T22:35:32.70925-05:00","closed_at":"2025-12-13T22:35:32.70925-05:00"}
{"id":"cooking_app-fwo","title":"Docs: clarify API URL resolution","description":"Document how cookctl chooses api_url when stored credentials, COOKING_PAT, and --api-url are used.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T23:40:48.332019-05:00","updated_at":"2025-12-22T23:41:07.222148-05:00","closed_at":"2025-12-22T23:41:07.222148-05:00"}
{"id":"cooking_app-ghv","title":"Recipes list: display recipe book name (when set)","description":"Show the recipe book name alongside each recipe in the list, using the already-fetched recipe books data.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T22:25:12.308417-05:00","updated_at":"2025-12-13T22:28:22.342909-05:00","closed_at":"2025-12-13T22:28:22.342909-05:00"}
{"id":"cooking_app-gne","title":"Document and automate trusting Caddy local CA on clients","description":"Provide docs (and ideally a helper script) to export Caddy's internal root CA from the server and install/trust it on common clients (macOS Keychain, Windows cert store, iOS/Android instructions).","acceptance_criteria":"- Clear steps to export CA cert from server\n- macOS/Windows instructions included\n- iOS/Android guidance included\n- Troubleshooting section for browser warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T20:12:30.545674-05:00","updated_at":"2025-12-18T06:19:04.662214-05:00","closed_at":"2025-12-18T06:19:04.662214-05:00","dependencies":[{"issue_id":"cooking_app-gne","depends_on_id":"cooking_app-edv","type":"parent-child","created_at":"2025-12-14T20:12:38.921519-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-h12","title":"Backend: Introduce sqlc-based data access layer and DB wiring in API app","description":"Implement the backend database access layer and wire it into the API service.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 6.1 (DB driver/query layer), 9.2 (Database access), 9.1 (Service layout).\n\nImplementation notes:\n- Use `pgx`/`pgxpool` for connections.\n- Add `sqlc` config (e.g., `backend/sqlc.yaml`) and generated package location (e.g., `backend/internal/db/sqlc`).\n- Define initial queries needed by upcoming endpoints (users/tokens/recipes/books/tags) as `.sql` files.\n- Wire DB into `backend/internal/httpapi` `App` and request handlers.","acceptance_criteria":"- `sqlc` generation is configured and documented (and reproducible in CI).\n- API service can connect to Postgres using `DATABASE_URL` and execute a simple query via generated code.\n- Add unit/integration tests for the DB layer (including at least one generated query execution).\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T11:27:28.663051-05:00","updated_at":"2025-12-13T12:41:45.927585-05:00","closed_at":"2025-12-13T12:41:45.927585-05:00","dependencies":[{"issue_id":"cooking_app-h12","depends_on_id":"cooking_app-dcn","type":"parent-child","created_at":"2025-12-13T11:34:47.228482-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-h12","depends_on_id":"cooking_app-q5s","type":"blocks","created_at":"2025-12-13T11:35:59.2319-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-h12","depends_on_id":"cooking_app-0uh","type":"blocks","created_at":"2025-12-13T11:35:59.236476-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-hm9","title":"Frontend: Add API client wrapper + TanStack Query integration","description":"Create a maintainable API integration layer for the React app.\n\nSpec references:\n- `personal-recipe-app-spec.md` section 10.4 (API integration approach) and 10.1 (UX principles).\n\nImplementation notes:\n- Decide between a generated client from OpenAPI (preferred) or a typed fetch wrapper.\n- Add TanStack Query and set up `QueryClientProvider`.\n- Ensure requests send cookies (session auth) and handle 401 by redirecting to `/login`.\n- Centralize API base URL assumptions (Vite proxy `/api` is already configured in `frontend/vite.config.ts`).","acceptance_criteria":"- A single API layer exists and is used by at least one screen.\n- If the project does not use OpenAPI generation, update `personal-recipe-app-spec.md` section 10.4 to reflect the chosen approach.\n- Add unit tests for API wrapper behavior (e.g., credentials included, error mapping).\n- Run `make frontend-format` and ensure `make frontend-ci` (and `npm run test` if present) passes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T11:32:18.092178-05:00","updated_at":"2025-12-13T18:43:41.51184-05:00","closed_at":"2025-12-13T18:43:41.51184-05:00","dependencies":[{"issue_id":"cooking_app-hm9","depends_on_id":"cooking_app-7ko","type":"parent-child","created_at":"2025-12-13T11:35:22.162858-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-hm9","depends_on_id":"cooking_app-5p5","type":"blocks","created_at":"2025-12-13T11:36:58.820815-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-hm9","depends_on_id":"cooking_app-1g9","type":"blocks","created_at":"2025-12-13T11:36:58.846847-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-hpx","title":"Test: acceptance field check","description":"Temporary test issue to verify beads acceptance field mapping. Will be closed/removed later if needed.","acceptance_criteria":"- Acceptance should be stored.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-13T11:27:42.319075-05:00","updated_at":"2025-12-13T11:28:39.028463-05:00","closed_at":"2025-12-13T11:28:39.028463-05:00"}
{"id":"cooking_app-hz4","title":"MVP v1 epic: Backend auth, sessions, and user management","description":"Implement authentication and user provisioning per `personal-recipe-app-spec.md`, including username/password login, session auth for browser usage, and admin user management.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 3 (Users and permissions), 8.2–8.4 (Auth + Users API), 9.4 (Authentication implementation), 12 (Security), 13 (Backend tests).\n\nScope:\n- Bootstrap-first-user path (prefer CLI as recommended in spec).\n- Password hashing (Argon2id recommended) and session cookie settings.\n- Auth endpoints: `/api/v1/auth/login`, `/api/v1/auth/logout`, `/api/v1/auth/me`.\n- User management endpoints: `/api/v1/users` and optional deactivate endpoint.\n\nNon-goals:\n- Roles/permissions beyond “all admin” (explicit non-goal in spec).","acceptance_criteria":"- All child issues under this epic are completed and meet their own acceptance criteria.\n- Any deviations/clarifications are reflected in `personal-recipe-app-spec.md`.\n- `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T11:26:37.615821-05:00","updated_at":"2025-12-13T21:51:36.318688-05:00","closed_at":"2025-12-13T21:51:36.318688-05:00"}
{"id":"cooking_app-ift","title":"Recipes list: include-deleted filter + deleted badge + disable edit","description":"Expose the existing backend `include_deleted` capability in the Recipes list UI, visually mark deleted recipes, and avoid offering Edit actions for deleted recipes.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T22:06:39.232264-05:00","updated_at":"2025-12-13T22:10:08.720343-05:00","closed_at":"2025-12-13T22:10:08.720343-05:00"}
{"id":"cooking_app-j1a","title":"Recipe detail: make action error dismissible","description":"When a detail action (delete/restore) fails and shows an error alert, provide a Dismiss button to clear the action error while staying on the page.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T22:55:01.329623-05:00","updated_at":"2025-12-13T22:59:16.524211-05:00","closed_at":"2025-12-13T22:59:16.524211-05:00"}
{"id":"cooking_app-jyb","title":"Recipes list: add Clear filters action","description":"Add a clear/reset control on the recipes list to reset q/book/tag/include_deleted back to defaults (and URL params).","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-13T22:22:09.422835-05:00","updated_at":"2025-12-13T22:22:44.620788-05:00","closed_at":"2025-12-13T22:22:44.620788-05:00"}
{"id":"cooking_app-k24","title":"Recipe detail: show deleted_at timestamp when deleted","description":"When a recipe is deleted, display the `deleted_at` timestamp on the detail page (stable string display). Update tests.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T23:04:25.083846-05:00","updated_at":"2025-12-13T23:07:15.704942-05:00","closed_at":"2025-12-13T23:07:15.704942-05:00"}
{"id":"cooking_app-kht","title":"Backend tags: Implement /api/v1/tags CRUD endpoints","description":"Implement Tags CRUD endpoints.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 4.4 (Tags), 7.2.3 (`tags`), 8.6 (Tags endpoints).\n\nImplementation notes:\n- Endpoints: `GET/POST/PUT/DELETE /api/v1/tags`.\n- Enforce auth.\n- Ensure name uniqueness (case-insensitive per schema decision).\n- Decide behavior on delete when a tag is attached to recipes (cascade vs prevent) and update `personal-recipe-app-spec.md` to match.","acceptance_criteria":"- Endpoints exist and behave as documented in the spec (or `personal-recipe-app-spec.md` updated to match final behavior).\n- Unit tests cover validation and error responses.\n- Integration tests cover CRUD plus delete behavior when tag has recipe associations.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T11:30:45.202515-05:00","updated_at":"2025-12-13T19:40:20.171286-05:00","closed_at":"2025-12-13T19:40:20.171286-05:00","dependencies":[{"issue_id":"cooking_app-kht","depends_on_id":"cooking_app-2iw","type":"parent-child","created_at":"2025-12-13T11:35:07.362206-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-kht","depends_on_id":"cooking_app-m04","type":"blocks","created_at":"2025-12-13T11:36:31.795179-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-kht","depends_on_id":"cooking_app-h12","type":"blocks","created_at":"2025-12-13T11:36:31.799834-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-l54","title":"CLI: improve subcommand help output","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T16:30:21.251816-05:00","updated_at":"2025-12-28T16:41:05.374938-05:00","closed_at":"2025-12-28T16:41:05.374938-05:00"}
{"id":"cooking_app-lf1","title":"CLI: add version command","description":"Expose a cookctl version command that prints build metadata in table or JSON output.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T23:07:10.004441-05:00","updated_at":"2025-12-22T23:11:00.905668-05:00","closed_at":"2025-12-22T23:11:00.905668-05:00"}
{"id":"cooking_app-m04","title":"Backend auth: Add auth middleware (session and PAT) + protected route groups","description":"Add HTTP middleware that authenticates requests using either a browser session cookie or a Personal Access Token (PAT), and apply it to protected routes.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 8.1 (Auth standards), 9.4–9.5 (Auth + PAT), 12 (Security).\n\nImplementation notes:\n- Middleware should set request context values: `user_id` and `auth_type` (`session` or `pat`).\n- For unauthenticated requests to protected endpoints, return problem-style JSON errors (spec 8.1) with `401`.\n- Ensure `/healthz` and `/api/v1/healthz` remain public.","acceptance_criteria":"- Protected endpoints require auth and return consistent 401 errors when missing/invalid auth.\n- Unit tests cover middleware behavior (no auth / session / pat).\n- Integration tests cover at least one protected endpoint.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T11:29:24.593737-05:00","updated_at":"2025-12-13T18:23:40.060808-05:00","closed_at":"2025-12-13T18:23:40.060808-05:00","dependencies":[{"issue_id":"cooking_app-m04","depends_on_id":"cooking_app-hz4","type":"parent-child","created_at":"2025-12-13T11:34:56.904283-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-m04","depends_on_id":"cooking_app-6aa","type":"blocks","created_at":"2025-12-13T11:36:17.590519-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-m04","depends_on_id":"cooking_app-30b","type":"blocks","created_at":"2025-12-13T11:36:17.593946-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-m0q","title":"Backend: remove any-type switch from shopping list item response","description":"Replace buildShoppingListItemResponse(any) with typed response builders or unified row type for list/update handlers.","acceptance_criteria":"No use of any/type switch for shopping list item responses; handlers call typed builders; tests pass.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T21:02:39.722381-05:00","created_by":"saiaj","updated_at":"2025-12-30T18:26:20.71921-05:00","closed_at":"2025-12-30T18:26:20.71921-05:00","close_reason":"Removed any-type switch from shopping list item response builder","dependencies":[{"issue_id":"cooking_app-m0q","depends_on_id":"cooking_app-73v.3","type":"discovered-from","created_at":"2025-12-29T21:02:39.723264-05:00","created_by":"daemon"}]}
{"id":"cooking_app-mtq","title":"Recipe detail: display recipe book name and link back to filtered list","description":"If recipe has recipe_book_id, display the book name on the detail page and link back to `/recipes?book_id=...`.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T22:28:51.213881-05:00","updated_at":"2025-12-13T22:29:57.690285-05:00","closed_at":"2025-12-13T22:29:57.690285-05:00"}
{"id":"cooking_app-ncg","title":"Cookctl: extract recipe payload builder module","description":"Move interactive prompt parsing, JSON reading, and template shaping into a dedicated module with focused tests to reduce coupling in app.go.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T17:21:52.490324-05:00","updated_at":"2025-12-30T20:07:48.480786-05:00","closed_at":"2025-12-30T20:07:48.480786-05:00","close_reason":"Extracted recipe payload module with tests"}
{"id":"cooking_app-nfa","title":"Frontend settings: Implement /settings/tokens PAT manager UI","description":"Implement UI for Personal Access Token creation/list/revocation.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 4.1 (Settings), 8.3 (PAT endpoints), 10.2 (routes).\n\nImplementation notes:\n- Create PAT: name + optional expiry, display secret once with copy affordance.\n- List PATs (no secrets), show last used and expiry.\n- Revoke token.","acceptance_criteria":"- UI works end-to-end against backend token endpoints.\n- Token secret is displayed only once and not persisted in local storage.\n- Add component tests for create (including rendering returned secret) and revoke.\n- Run `make frontend-format` and ensure `make frontend-ci` (and `npm run test` if present) passes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T11:32:52.404947-05:00","updated_at":"2025-12-13T20:23:35.258387-05:00","closed_at":"2025-12-13T20:23:35.258387-05:00","dependencies":[{"issue_id":"cooking_app-nfa","depends_on_id":"cooking_app-7ko","type":"parent-child","created_at":"2025-12-13T11:35:22.18923-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nfa","depends_on_id":"cooking_app-hm9","type":"blocks","created_at":"2025-12-13T11:37:35.630701-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nfa","depends_on_id":"cooking_app-rmu","type":"blocks","created_at":"2025-12-13T11:37:35.63427-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nfa","depends_on_id":"cooking_app-4u5","type":"blocks","created_at":"2025-12-13T11:37:35.637922-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo","title":"Frontend: Implement 'Midnight Glass' design language","description":"Implement the incremental UI/UX migration described in docs/site_design.md: introduce design tokens, remove Vite starter global CSS, standardize AppShell/Page chrome, add a small set of UI primitives, migrate high-churn list pages, and add Playwright-based visual regression coverage.","acceptance_criteria":"- All child issues for this epic are completed.\\n- UI uses token-driven styles (no Vite demo centering/typography/button defaults).\\n- Accessibility baseline improved (focus-visible, skip link, reduced-motion).\\n- Deterministic visual snapshot workflow exists (Playwright).\\n- make frontend-ci passes.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-17T20:01:26.195723-05:00","updated_at":"2025-12-17T21:26:10.809947-05:00","closed_at":"2025-12-17T21:26:10.809947-05:00","labels":["design-system","frontend","ui"]}
{"id":"cooking_app-nqo.1","title":"UI: Capture baseline visual snapshots (desktop + mobile)","description":"Before changing global CSS/tokens, capture baseline screenshots per docs/site_design.md Phase 0.\\n\\nNotes:\\n- Use fixed viewports (e.g., 1280x720 and 390x844) and prefers-reduced-motion where possible.\\n- Capture at least /login and /recipes (authenticated) so global layout drift is detectable.\\n- Store outputs in a dedicated folder (e.g., history/ui-baseline/) and document the command(s) used.","acceptance_criteria":"- Repeatable command(s) exist to generate baseline images for desktop + mobile.\\n- Baseline images are captured for /login and at least one authenticated route.\\n- No credentials are hard-coded; use env-provided values or a local storageState.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:01:34.608844-05:00","updated_at":"2025-12-17T20:24:43.915179-05:00","closed_at":"2025-12-17T20:24:43.915179-05:00","labels":["frontend","playwright","ui","visual-regression"],"dependencies":[{"issue_id":"cooking_app-nqo.1","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:01:34.60933-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.10","title":"UI: Migrate /books list page to primitives","description":"Implement docs/site_design.md Phase 3 for /books: migrate BookListPage to use shared UI primitives (especially form controls and buttons) and token-driven styles.","acceptance_criteria":"- BookListPage uses Button/Input/Card/FormField primitives where applicable.\\n- Existing BookListPage tests are updated/extended as needed.\\n- make frontend-ci passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:02:57.497538-05:00","updated_at":"2025-12-17T21:00:35.339535-05:00","closed_at":"2025-12-17T21:00:35.339535-05:00","labels":["books","frontend","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.10","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:02:57.498063-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nqo.10","depends_on_id":"cooking_app-nqo.7","type":"blocks","created_at":"2025-12-17T20:02:57.49904-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.11","title":"UI: Migrate /tags list page to primitives","description":"Implement docs/site_design.md Phase 3 for /tags: migrate TagListPage to use shared UI primitives and token-driven styles.","acceptance_criteria":"- TagListPage uses Button/Input/Card/FormField primitives where applicable.\\n- Existing TagListPage tests are updated/extended as needed.\\n- make frontend-ci passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:03:01.936691-05:00","updated_at":"2025-12-17T21:01:59.721558-05:00","closed_at":"2025-12-17T21:01:59.721558-05:00","labels":["frontend","tags","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.11","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:03:01.937215-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nqo.11","depends_on_id":"cooking_app-nqo.7","type":"blocks","created_at":"2025-12-17T20:03:01.938204-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.12","title":"Tooling: Enforce token usage (avoid raw hex / inline styles)","description":"Implement docs/site_design.md Phase 0 'convention check' to prevent style drift.\\n\\nSuggested approach:\\n- Add ast-grep rules for TS/TSX to flag JSX inline styles (style={{...}}) and raw hex color literals (e.g., '#a7c7ff').\\n- Add a CSS check (stylelint preferred, or a targeted script) to flag hex color values in *.module.css in favor of var(--color-...) tokens.\\n- Wire the check(s) into make frontend-ci (or frontend CI scripts) so violations fail CI.","acceptance_criteria":"- A repeatable lint/check step fails on new inline styles and new raw hex colors in TS/TSX.\\n- A repeatable lint/check step flags raw hex colors in CSS modules (with documented exceptions if needed).\\n- Documentation exists for the rule(s) and how to fix violations.\\n- make frontend-ci passes.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T20:03:19.610033-05:00","updated_at":"2025-12-17T21:18:50.064893-05:00","closed_at":"2025-12-17T21:18:50.064893-05:00","labels":["frontend","lint","tooling","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.12","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:03:19.610494-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.13","title":"Playwright: Add deterministic visual snapshot suite","description":"Implement docs/site_design.md Phase 4. Add a Playwright-based visual regression workflow (snapshots) to catch layout/style drift.\\n\\nRequirements:\\n- Fixed viewports (e.g., 390x844 and 1280x720)\\n- prefers-reduced-motion + stable waits\\n- Auth via env-provided creds or storageState captured per run (no hard-coded secrets; do not edit .env files)\\n- Mask dynamic areas (e.g., 'Signed in as …') to avoid churn\\n- Capture /login, /recipes, /books, /tags, /settings at both viewports\\n\\nIntegrate into CI via a dedicated script (and optionally make ci).","acceptance_criteria":"- Playwright config and tests exist and can run headlessly on a clean machine.\\n- Snapshot outputs are deterministic (no frequent churn from dynamic text/timestamps).\\n- Running the suite is documented (command + required env vars).\\n- CI runs the suite (or an explicit make target exists).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T20:03:30.120546-05:00","updated_at":"2025-12-17T21:10:00.090101-05:00","closed_at":"2025-12-17T21:10:00.090101-05:00","labels":["ci","frontend","playwright","visual-regression"],"dependencies":[{"issue_id":"cooking_app-nqo.13","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:03:30.121056-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.14","title":"Docs: Document UI tokens and component boundaries","description":"Following docs/site_design.md, document the new token names, primitive components, and conventions so future UI work stays consistent.\\n\\nInclude:\\n- Where tokens live + how to use them from CSS modules\\n- When to use primitives vs page-specific styles\\n- Accessibility expectations (focus-visible, aria-invalid/describedby, prefers-reduced-motion)","acceptance_criteria":"- A short doc exists in docs/ (or frontend/README.md) describing tokens/primitives and how to contribute UI changes.\\n- The doc includes examples for common patterns (forms, CRUD lists).","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T20:03:46.453218-05:00","updated_at":"2025-12-17T21:20:11.044044-05:00","closed_at":"2025-12-17T21:20:11.044044-05:00","labels":["docs","frontend","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.14","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:03:46.453663-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.15","title":"UI: Reduce remaining inline styles across pages","description":"Follow the 'component boundaries' guidance in docs/site_design.md by reducing one-off inline styles that bypass tokens/primitives.\\n\\nInitial targets (currently use style={{...}}):\\n- RecipeDetailPage, RecipeEditorPage\\n- TokenManagerPage, UserManagerPage, SettingsPage\\n\\nApproach:\\n- Replace inline layout/typography/color with primitives, CSS modules, and tokens.\\n- Keep behavior unchanged; focus on consistency and maintainability.","acceptance_criteria":"- Inline styles are reduced or eliminated in the listed pages where practical.\\n- Visual styling remains consistent with the Midnight Glass tokens.\\n- make frontend-ci passes.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-17T20:03:58.341083-05:00","updated_at":"2025-12-17T21:21:29.996724-05:00","closed_at":"2025-12-17T21:21:29.996724-05:00","labels":["frontend","refactor","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.15","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:03:58.341606-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nqo.15","depends_on_id":"cooking_app-nqo.7","type":"blocks","created_at":"2025-12-17T20:03:58.342658-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.16","title":"UI: Consider compact user menu in header on mobile","description":"docs/site_design.md suggests reducing header height on mobile by moving 'Signed in as …' into a menu (or smaller treatment). Explore a minimal approach (no heavy UI framework) that preserves access to user info/actions while keeping the sticky header compact.","acceptance_criteria":"- A concrete proposal is implemented (menu or compact treatment) without regressing navigation usability.\\n- Keyboard/focus behavior remains accessible.\\n- make frontend-ci passes.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-17T20:04:04.249838-05:00","updated_at":"2025-12-17T21:25:41.03684-05:00","closed_at":"2025-12-17T21:25:41.03684-05:00","labels":["frontend","layout","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.16","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:04:04.250293-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nqo.16","depends_on_id":"cooking_app-nqo.4","type":"blocks","created_at":"2025-12-17T20:04:04.251316-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.17","title":"Router: Add regression test for auth route boundary","description":"docs/site_design.md Phase 0 calls out route boundaries: auth routes (e.g., /login) stay outside the authenticated AppShell. Add a regression test to lock this behavior in (so AppShell chrome doesn't accidentally appear on /login).","acceptance_criteria":"- A frontend test verifies /login renders without AppShell header/nav and an authenticated route renders with it.\\n- make frontend-ci passes.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T20:04:15.767964-05:00","updated_at":"2025-12-17T21:21:15.515053-05:00","closed_at":"2025-12-17T21:21:15.515053-05:00","labels":["frontend","routing","tests","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.17","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:04:15.768436-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.2","title":"UI: Add design tokens (CSS variables)","description":"Implement docs/site_design.md Phase 1a token layer: define a single tokens/theme stylesheet (CSS variables) for Midnight Glass and import it from the app entrypoint.\\n\\nInclude at minimum:\\n- Colors: bg, surface-1/2, border, text, muted, accent, danger, focus\\n- Radius scale and spacing scale\\n- Typography tokens (font stack + text sizes + line heights)","acceptance_criteria":"- Tokens are defined once (CSS variables) and used by CSS modules via var(--...).\\n- Tokens file is imported from the app entrypoint so it applies globally.\\n- make frontend-ci passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:01:42.193045-05:00","updated_at":"2025-12-17T20:31:46.177752-05:00","closed_at":"2025-12-17T20:31:46.177752-05:00","labels":["css","frontend","tokens","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.2","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:01:42.193476-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nqo.2","depends_on_id":"cooking_app-nqo.1","type":"blocks","created_at":"2025-12-17T20:01:42.194529-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.3","title":"UI: Remove Vite starter global CSS (minimal reset)","description":"Implement docs/site_design.md Phase 1a reset: replace frontend/src/index.css Vite demo defaults with a minimal, app-aligned global stylesheet.\\n\\nScope:\\n- Remove body flex-centering and demo h1/button/a styles.\\n- Set body background/text via tokens (e.g., --color-bg / --color-text).\\n- Ensure full-bleed background and use min-height: 100dvh for mobile.\\n- Avoid prefers-color-scheme: light overrides (single default theme).","acceptance_criteria":"- Global CSS no longer centers the app like a demo page.\\n- Global anchor/button defaults no longer fight CSS modules.\\n- Background/text come from tokens.\\n- make frontend-ci passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:01:48.475748-05:00","updated_at":"2025-12-17T20:34:53.635298-05:00","closed_at":"2025-12-17T20:34:53.635298-05:00","labels":["css","frontend","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.3","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:01:48.476191-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nqo.3","depends_on_id":"cooking_app-nqo.2","type":"blocks","created_at":"2025-12-17T20:01:48.477142-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.4","title":"UI: Tokenize AppShell/Page chrome and align header/content","description":"Implement docs/site_design.md Phase 1b for shell/page chrome.\\n\\nScope:\\n- Replace hard-coded colors in AppShell.module.css and Page.module.css with var(--...) tokens.\\n- Introduce a shared 'inner container' so header content aligns with main content edges on desktop.\\n- Add safe-area padding support for the sticky header on iOS (env(safe-area-inset-*)).\\n- Add hover + focus-visible styling for nav pills using tokens.","acceptance_criteria":"- AppShell and Page use design tokens for colors/borders/radius.\\n- Header and main content columns align on desktop.\\n- Sticky header respects safe-area insets.\\n- make frontend-ci passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:01:59.309522-05:00","updated_at":"2025-12-17T20:37:25.49915-05:00","closed_at":"2025-12-17T20:37:25.49915-05:00","labels":["css","frontend","layout","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.4","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:01:59.309974-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nqo.4","depends_on_id":"cooking_app-nqo.2","type":"blocks","created_at":"2025-12-17T20:01:59.311102-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.5","title":"UI: Keep Recipes tab active on nested recipe routes","description":"docs/site_design.md notes that Recipes currently uses NavLink end, so /recipes/new and /recipes/:id don't show the Recipes tab as active. Fix wayfinding by ensuring the Recipes tab remains active for nested routes.","acceptance_criteria":"- Navigating to /recipes/new or /recipes/:id keeps the Recipes nav pill in the active state.\\n- Add/extend a frontend test to cover this behavior.\\n- make frontend-ci passes.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T20:02:05.6551-05:00","updated_at":"2025-12-17T20:15:02.987889-05:00","closed_at":"2025-12-17T20:15:02.987889-05:00","labels":["frontend","routing","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.5","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:02:05.655571-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.6","title":"UI: Improve AppShell accessibility (skip link, focus rings)","description":"Implement accessibility requirements from docs/site_design.md.\\n\\nScope:\\n- Add a 'Skip to content' link in AppShell and ensure the main region is targetable.\\n- Ensure nav pills and all interactive controls have a clear :focus-visible indicator that meets contrast on dark surfaces.\\n- Respect prefers-reduced-motion for non-essential transitions/animations.","acceptance_criteria":"- Keyboard users can reach a skip link and jump to main content.\\n- Focus-visible styles are present and visible on nav + primary controls.\\n- prefers-reduced-motion disables non-essential transitions.\\n- make frontend-ci passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:02:15.726676-05:00","updated_at":"2025-12-17T20:40:00.515864-05:00","closed_at":"2025-12-17T20:40:00.515864-05:00","labels":["a11y","frontend","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.6","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:02:15.727235-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nqo.6","depends_on_id":"cooking_app-nqo.4","type":"blocks","created_at":"2025-12-17T20:02:15.728228-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.7","title":"UI: Add core primitives (Button, Input/Select, Card, FormField)","description":"Implement docs/site_design.md Phase 3 primitives as token-driven React components + CSS modules (no UI framework).\\n\\nComponents:\\n- Button: primary/secondary/ghost/danger, sm/md\\n- Input + Select: consistent padding/border/focus/disabled\\n- Card: glass surface used by pages and list containers\\n- FormField: label + control + help/error text (aria-live/aria-describedby)\\n\\nGoal: prevent per-page style drift by centralizing the highest-churn UI elements.","acceptance_criteria":"- New primitives exist under a clear ui/components (or similar) folder with token-driven styles.\\n- Components meet a11y requirements (focus-visible, disabled, aria-invalid + describedby for errors).\\n- Add unit tests (Testing Library + Vitest) for variants and accessibility behavior.\\n- Document usage conventions (where to use primitives vs page-specific CSS).\\n- make frontend-ci passes.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T20:02:26.174561-05:00","updated_at":"2025-12-17T20:44:44.354669-05:00","closed_at":"2025-12-17T20:44:44.354669-05:00","labels":["components","design-system","frontend","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.7","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:02:26.175043-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nqo.7","depends_on_id":"cooking_app-nqo.2","type":"blocks","created_at":"2025-12-17T20:02:26.176139-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.8","title":"UI: Normalize LoginPage layout (no inline styles)","description":"Implement docs/site_design.md Phase 2: refactor LoginPage away from inline styles into CSS modules and reuse the same primitives/patterns as the rest of the app.\\n\\nGoals:\\n- Match Midnight Glass background and card treatment\\n- Use FormField + Input + Button primitives\\n- Ensure error messaging uses role=alert/aria-live and consistent spacing","acceptance_criteria":"- LoginPage no longer uses inline styles for layout/typography/colors.\\n- Login form uses the shared primitives and matches the app chrome.\\n- Existing LoginPage tests are updated/extended as needed.\\n- make frontend-ci passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:02:34.059026-05:00","updated_at":"2025-12-17T20:46:36.260702-05:00","closed_at":"2025-12-17T20:46:36.260702-05:00","labels":["auth","frontend","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.8","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:02:34.059511-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nqo.8","depends_on_id":"cooking_app-nqo.7","type":"blocks","created_at":"2025-12-17T20:02:34.060531-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nqo.8","depends_on_id":"cooking_app-nqo.3","type":"blocks","created_at":"2025-12-17T20:02:34.061083-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nqo.9","title":"UI: Migrate /recipes list page to primitives","description":"Implement docs/site_design.md Phase 3 for /recipes: migrate RecipeListPage (filters, create action, list rows, danger actions) to use the new UI primitives and tokens instead of per-page button/input styling.\\n\\nNotes:\\n- Prefer shared patterns for filter rows, empty states, and error banners.\\n- Reduce reliance on CrudList.module.css where primitives/patterns cover the use case.","acceptance_criteria":"- RecipeListPage uses Button/Input/Select/Card/FormField primitives where applicable.\\n- Visual styling is token-driven and consistent with other pages.\\n- Existing RecipeListPage tests are updated/extended to cover behavior with the new primitives.\\n- make frontend-ci passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:02:51.797733-05:00","updated_at":"2025-12-17T20:55:38.393087-05:00","closed_at":"2025-12-17T20:55:38.393087-05:00","labels":["frontend","recipes","ui"],"dependencies":[{"issue_id":"cooking_app-nqo.9","depends_on_id":"cooking_app-nqo","type":"parent-child","created_at":"2025-12-17T20:02:51.798305-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-nqo.9","depends_on_id":"cooking_app-nqo.7","type":"blocks","created_at":"2025-12-17T20:02:51.799337-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nzc","title":"CLI: scaffold cookctl","description":"Scaffold the cookctl companion CLI with config, credential storage, HTTP client, and initial auth/health commands.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-22T21:41:04.564156-05:00","updated_at":"2025-12-22T22:04:28.288581-05:00","closed_at":"2025-12-22T22:04:28.288581-05:00"}
{"id":"cooking_app-nzc.1","title":"CLI: command skeleton","description":"Add cookctl main entrypoint, global flags, and command routing.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T21:41:12.544583-05:00","updated_at":"2025-12-22T22:04:12.95276-05:00","closed_at":"2025-12-22T22:04:12.95276-05:00","dependencies":[{"issue_id":"cooking_app-nzc.1","depends_on_id":"cooking_app-nzc","type":"parent-child","created_at":"2025-12-22T21:41:12.545028-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nzc.2","title":"CLI: config and credential store","description":"Implement config/env loading and PAT credential storage with OS-specific paths.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T21:41:16.074242-05:00","updated_at":"2025-12-22T22:04:15.716919-05:00","closed_at":"2025-12-22T22:04:15.716919-05:00","dependencies":[{"issue_id":"cooking_app-nzc.2","depends_on_id":"cooking_app-nzc","type":"parent-child","created_at":"2025-12-22T21:41:16.074723-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nzc.3","title":"CLI: HTTP client and base commands","description":"Implement HTTP client wrapper and initial health/auth commands.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T21:41:18.788577-05:00","updated_at":"2025-12-22T22:04:18.757639-05:00","closed_at":"2025-12-22T22:04:18.757639-05:00","dependencies":[{"issue_id":"cooking_app-nzc.3","depends_on_id":"cooking_app-nzc","type":"parent-child","created_at":"2025-12-22T21:41:18.789024-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-nzc.4","title":"CLI: scaffold unit tests","description":"Add unit tests for config loading, credential storage, and HTTP client behavior.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T21:41:21.89056-05:00","updated_at":"2025-12-22T22:04:23.017858-05:00","closed_at":"2025-12-22T22:04:23.017858-05:00","dependencies":[{"issue_id":"cooking_app-nzc.4","depends_on_id":"cooking_app-nzc","type":"parent-child","created_at":"2025-12-22T21:41:21.89104-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-ou9","title":"CLI: accept global flags anywhere in command line","description":"Allow global flags like --output/--api-url/--timeout/--debug/--help/--version to appear after the command token (interspersed). Update parsing logic, tests, and docs accordingly.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-23T04:32:29.853777-05:00","updated_at":"2025-12-23T04:36:28.33806-05:00","closed_at":"2025-12-23T04:36:28.33806-05:00","dependencies":[{"issue_id":"cooking_app-ou9","depends_on_id":"cooking_app-6lu","type":"discovered-from","created_at":"2025-12-23T04:32:29.85497-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-p27","title":"CLI: respect stored API URL","description":"When using stored credentials, cookctl should use the stored API URL instead of the config default.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-22T23:27:09.716787-05:00","updated_at":"2025-12-22T23:27:54.459927-05:00","closed_at":"2025-12-22T23:27:54.459927-05:00"}
{"id":"cooking_app-q3c","title":"Recipes list: allow restoring deleted recipes from list","description":"When `include_deleted` is enabled and an item is deleted, show a Restore action in the list that calls the restore endpoint and refreshes the list.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-13T22:25:12.333913-05:00","updated_at":"2025-12-13T22:27:00.891092-05:00","closed_at":"2025-12-13T22:27:00.891092-05:00"}
{"id":"cooking_app-q5s","title":"Backend: Add Postgres integration test harness (Testcontainers or dockertest)","description":"Add a repeatable integration-test harness that spins up a temporary Postgres 18 instance for backend tests (schema + API integration tests).\n\nSpec references:\n- `personal-recipe-app-spec.md` section 13 (Backend testing requirements).\n\nImplementation notes:\n- Use `testcontainers-go`, `ory/dockertest`, or an equivalent approach that works in CI.\n- Provide helpers to: start Postgres 18, run migrations, and return a `DATABASE_URL` and/or `pgxpool.Pool`.\n- Keep tests hermetic (unique DB per test suite, cleanup containers).","acceptance_criteria":"- A new integration test package exists and can start Postgres 18 and run migrations reliably.\n- At least one test proves the harness works (e.g., connects and runs a simple query).\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T11:27:28.67548-05:00","updated_at":"2025-12-13T12:37:48.202767-05:00","closed_at":"2025-12-13T12:37:48.202767-05:00","dependencies":[{"issue_id":"cooking_app-q5s","depends_on_id":"cooking_app-dcn","type":"parent-child","created_at":"2025-12-13T11:34:47.243974-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-q5s","depends_on_id":"cooking_app-0uh","type":"blocks","created_at":"2025-12-13T11:35:59.216228-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-q5s","depends_on_id":"cooking_app-zvm","type":"blocks","created_at":"2025-12-13T11:35:59.227097-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-qb9","title":"Frontend PWA: Add manifest + installability (offline disabled)","description":"Add minimal PWA support for installability.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 6.2 (PWA) and 10.6 (PWA requirements).\n\nImplementation notes:\n- Add `vite-plugin-pwa` and configure `manifest.webmanifest`:\n  - name/short_name\n  - icons 192/512 (can use placeholders initially)\n  - display: standalone\n- Register service worker for static asset caching only (no offline data caching).","acceptance_criteria":"- App is installable (manifest + service worker registered) and does not implement offline recipe caching.\n- Add unit test(s) where applicable (e.g., config presence) and/or build-time checks.\n- Run `make frontend-format` and ensure `make frontend-ci` passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T11:32:52.415969-05:00","updated_at":"2025-12-13T19:37:06.884255-05:00","closed_at":"2025-12-13T19:37:06.884255-05:00","dependencies":[{"issue_id":"cooking_app-qb9","depends_on_id":"cooking_app-7ko","type":"parent-child","created_at":"2025-12-13T11:35:22.137146-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-qb9","depends_on_id":"cooking_app-5p5","type":"blocks","created_at":"2025-12-13T11:37:35.587529-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-qb9","depends_on_id":"cooking_app-1g9","type":"blocks","created_at":"2025-12-13T11:37:42.439464-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-qno","title":"Backend auth: Implement password hashing (Argon2id) + users repository helpers","description":"Add password hashing and user persistence helpers to support username/password authentication.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 6.1 (Password hashing), 7.2.1 (`users` table), 9.4 (Authentication), 12 (Security).\n\nImplementation notes:\n- Use Argon2id (recommended) with documented parameters.\n- Provide helpers for: hash password, verify password, and username normalization (trim; case-insensitive uniqueness strategy must match schema choice).\n- Add DB queries for: create user, get user by username, get user by id, list users, set `is_active`.","acceptance_criteria":"- Password hashing/verification implemented with Argon2id (or spec-updated alternative).\n- Unit tests cover hashing + verification + edge cases (wrong password, empty input handling).\n- Integration tests cover creating/fetching users with the actual DB schema.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T11:29:24.637775-05:00","updated_at":"2025-12-13T16:50:48.610609-05:00","closed_at":"2025-12-13T16:50:48.610609-05:00","dependencies":[{"issue_id":"cooking_app-qno","depends_on_id":"cooking_app-hz4","type":"parent-child","created_at":"2025-12-13T11:34:56.889721-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-qno","depends_on_id":"cooking_app-h12","type":"blocks","created_at":"2025-12-13T11:36:17.582387-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-qno","depends_on_id":"cooking_app-0uh","type":"blocks","created_at":"2025-12-13T11:36:17.600078-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-r8c","title":"Add Ubuntu deployment script for LAN server","description":"Provide a deploy script that syncs repo to Ubuntu server via `ssh kittenserver`, runs production docker compose in `deploy/`, and verifies via curl against the server IP endpoint.","acceptance_criteria":"- Running the script deploys the stack on the server via docker compose\n- Script sets required env vars (POSTGRES_PASSWORD, COOKING_APP_DOMAIN) and supports LAN/IP deployment\n- Script verifies health with curl and prints a URL to visit","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T09:54:07.075944-05:00","updated_at":"2025-12-14T10:46:18.78648-05:00","closed_at":"2025-12-14T10:46:18.78648-05:00"}
{"id":"cooking_app-rir","title":"Add optional :443 TLS (Caddy internal) without redirect","description":"Update deploy Caddy config to serve HTTPS on :443 using `tls internal`, while keeping HTTP on :80 and avoiding automatic HTTP-\u003eHTTPS redirects unless explicitly enabled.","acceptance_criteria":"- `https://\u003clan-ip\u003e/` serves frontend\n- `https://\u003clan-ip\u003e/api/v1/healthz` works\n- `http://\u003clan-ip\u003e/` still works and is not redirected by default","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T20:12:30.577985-05:00","updated_at":"2025-12-18T06:16:54.735863-05:00","closed_at":"2025-12-18T06:16:54.735863-05:00","dependencies":[{"issue_id":"cooking_app-rir","depends_on_id":"cooking_app-edv","type":"parent-child","created_at":"2025-12-14T20:12:38.934008-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-rmu","title":"Frontend: Implement /login screen and session-based auth flow","description":"Implement the login UX for username/password and session cookie auth.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 8.2 (Auth endpoints), 10.2 (routes), 12 (cookie requirements).\n\nImplementation notes:\n- Build `/login` form with validation.\n- Call `POST /api/v1/auth/login` then load `/api/v1/auth/me` to confirm session.\n- Add a lightweight auth context/hook to store current user and gate protected routes.","acceptance_criteria":"- Login works end-to-end against the backend session endpoints.\n- Protected routes redirect to `/login` when unauthenticated.\n- Add component tests for login validation and redirect behavior.\n- Run `make frontend-format` and ensure `make frontend-ci` (and `npm run test` if present) passes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T11:32:18.104661-05:00","updated_at":"2025-12-13T19:54:43.284349-05:00","closed_at":"2025-12-13T19:54:43.284349-05:00","dependencies":[{"issue_id":"cooking_app-rmu","depends_on_id":"cooking_app-7ko","type":"parent-child","created_at":"2025-12-13T11:35:22.167316-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-rmu","depends_on_id":"cooking_app-6aa","type":"blocks","created_at":"2025-12-13T11:36:58.812942-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-rmu","depends_on_id":"cooking_app-5p5","type":"blocks","created_at":"2025-12-13T11:36:58.831834-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-rmu","depends_on_id":"cooking_app-1g9","type":"blocks","created_at":"2025-12-13T11:36:58.83812-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-rmu","depends_on_id":"cooking_app-hm9","type":"blocks","created_at":"2025-12-13T11:36:58.842685-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-s6i","title":"Frontend: Fix overlap between recipe search and books filter","description":"Investigate overlapping layout on /recipes where search field overlaps books dropdown; adjust layout to prevent overlap across breakpoints.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T16:09:05.617266-05:00","updated_at":"2025-12-21T16:11:03.933764-05:00","closed_at":"2025-12-21T16:11:03.933764-05:00"}
{"id":"cooking_app-tf2","title":"Preserve include_deleted when navigating via list/detail filter links","description":"If include_deleted is enabled, ensure book/tag filter Links in the recipes list preserve `include_deleted=true`. Also, when viewing a deleted recipe detail, the Book link back to list should include `include_deleted=true`.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T22:37:44.446093-05:00","updated_at":"2025-12-13T22:39:29.056065-05:00","closed_at":"2025-12-13T22:39:29.056065-05:00"}
{"id":"cooking_app-ttk","title":"QA: smoke test cookctl build","description":"Build cookctl via make target and verify --version output.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-23T04:04:12.281672-05:00","updated_at":"2025-12-23T04:04:31.144088-05:00","closed_at":"2025-12-23T04:04:31.144088-05:00"}
{"id":"cooking_app-uln","title":"Backend recipes: Implement soft delete and restore endpoints","description":"Implement soft delete and recommended restore behavior for recipes.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 4.6 (Soft delete), 8.7.5 (DELETE recipe), 8.7.6 (Restore recipe recommended).\n\nImplementation notes:\n- `DELETE /api/v1/recipes/{id}` sets `deleted_at=now()` and updates audit fields, returns `204`.\n- `PUT /api/v1/recipes/{id}/restore` sets `deleted_at=NULL` and updates audit fields.\n- Ensure list endpoint excludes deleted by default.","acceptance_criteria":"- Delete and restore endpoints behave as specified (or `personal-recipe-app-spec.md` updated to match).\n- Unit tests cover handler behavior and error responses.\n- Integration tests cover delete → excluded from list → restore → included again.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T11:30:45.123898-05:00","updated_at":"2025-12-13T21:28:03.822066-05:00","closed_at":"2025-12-13T21:28:03.822066-05:00","dependencies":[{"issue_id":"cooking_app-uln","depends_on_id":"cooking_app-2iw","type":"parent-child","created_at":"2025-12-13T11:35:07.328934-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-uln","depends_on_id":"cooking_app-h12","type":"blocks","created_at":"2025-12-13T11:36:41.669927-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-uln","depends_on_id":"cooking_app-m04","type":"blocks","created_at":"2025-12-13T11:36:41.694679-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-ulu","title":"Recipe detail: display created/updated timestamps","description":"On recipe detail, display created_at and updated_at fields (stable string display). Update tests accordingly.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T23:00:37.023584-05:00","updated_at":"2025-12-13T23:03:14.647689-05:00","closed_at":"2025-12-13T23:03:14.647689-05:00"}
{"id":"cooking_app-vb7","title":"CLI: enrich auth status metadata","description":"Include stored token metadata (id/name/created/expires) in auth status output when available.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-23T04:09:34.33001-05:00","updated_at":"2025-12-23T04:11:08.793449-05:00","closed_at":"2025-12-23T04:11:08.793449-05:00"}
{"id":"cooking_app-vjt","title":"Add deploy flags/envs to control HTTPS/redirect behavior","description":"Extend `deploy/deploy.sh` (and/or deploy env) to toggle LAN HTTPS on/off and optionally enable HTTP-\u003eHTTPS redirects when desired.","acceptance_criteria":"- `deploy/deploy.sh` supports enabling LAN HTTPS\n- Redirect can be enabled explicitly\n- Defaults remain safe for LAN (no surprise redirects)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T20:12:30.563381-05:00","updated_at":"2025-12-18T06:20:21.151443-05:00","closed_at":"2025-12-18T06:20:21.151443-05:00","dependencies":[{"issue_id":"cooking_app-vjt","depends_on_id":"cooking_app-edv","type":"parent-child","created_at":"2025-12-14T20:12:38.930612-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-vv3","title":"CLI: emit JSON API errors when --output json","description":"When --output json, emit API errors as structured JSON to stdout with status/code/message/details. Keep table output as human-readable stderr. Update docs and add unit tests.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-23T04:41:04.201919-05:00","updated_at":"2025-12-23T04:42:39.483338-05:00","closed_at":"2025-12-23T04:42:39.483338-05:00","dependencies":[{"issue_id":"cooking_app-vv3","depends_on_id":"cooking_app-6lu","type":"discovered-from","created_at":"2025-12-23T04:41:04.203375-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-w3q","title":"Recipes list: make action error dismissible","description":"When a list action (restore) fails and shows an error alert, provide a Dismiss button to clear the action error without changing filters.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T22:55:01.356547-05:00","updated_at":"2025-12-13T22:58:25.052841-05:00","closed_at":"2025-12-13T22:58:25.052841-05:00"}
{"id":"cooking_app-w9r","title":"RFC backend architecture remediations","description":"Implements the recommendations in `docs/backend_arcitecture_review.md` (2025-12-17) for contract correctness, error consistency, schema drift defenses, and security hardening.\n\nScope: `backend/`.","acceptance_criteria":"- Child issues are completed (closed)\n- `make backend-ci` passes\n- OpenAPI contract and runtime behavior match for auth + errors","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-17T20:00:29.709107-05:00","updated_at":"2025-12-18T06:23:27.649226-05:00","closed_at":"2025-12-18T06:23:27.649226-05:00"}
{"id":"cooking_app-w9r.1","title":"Define backend security model (authz matrix, CSRF, rate limiting, token/session lifecycle)","description":"Codify the authorization model and security semantics described in RFC section H. Decide single-tenant vs ownership rules, PAT vs cookie semantics, and clarify logout behavior for bearer auth.\n\nDeliverable: a short doc + explicit rules that handlers can follow consistently.","acceptance_criteria":"- Authorization matrix (resource × action × principal) exists and is reviewed\n- Decisions documented for CSRF strategy (cookie-auth unsafe methods)\n- Decisions documented for rate limiting (login + token issuance)\n- Session + PAT lifecycle semantics documented (expiry, rotation/revocation, sliding vs fixed sessions)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T20:01:10.100779-05:00","updated_at":"2025-12-17T20:10:29.202868-05:00","closed_at":"2025-12-17T20:10:29.202868-05:00","dependencies":[{"issue_id":"cooking_app-w9r.1","depends_on_id":"cooking_app-w9r","type":"parent-child","created_at":"2025-12-17T20:01:10.101832-05:00","created_by":"saiaj","metadata":"{}"}]}
{"id":"cooking_app-w9r.10","title":"Extract recipes create/update workflows into use-case functions with unit tests","description":"Implement RFC section C: move multi-step transactional workflows (recipes create/update) out of HTTP handlers into use-case functions with explicit dependencies and fast unit tests for invariants and error mapping.","acceptance_criteria":"- Recipe create/update orchestration lives outside handlers in testable use-case functions\n- Unit tests cover core invariants and typed error mapping\n- Handlers stay transport-focused (decode/validate, call use-case, map errors)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:02:14.68926-05:00","updated_at":"2025-12-18T06:23:22.149939-05:00","closed_at":"2025-12-18T06:23:22.149939-05:00","dependencies":[{"issue_id":"cooking_app-w9r.10","depends_on_id":"cooking_app-w9r","type":"parent-child","created_at":"2025-12-17T20:02:14.689919-05:00","created_by":"saiaj","metadata":"{}"}]}
{"id":"cooking_app-w9r.11","title":"Remove pgtype.* leakage from HTTP request/response DTOs","description":"Implement RFC section D: ensure HTTP DTOs do not expose `pgtype.*` types (e.g. `*pgtype.Numeric`). Convert to API-friendly primitives at the persistence boundary (e.g. decimal strings) and keep DB-driver types internal.","acceptance_criteria":"- HTTP request/response DTOs do not expose `pgtype.*` types\n- Conversions are centralized at the persistence boundary\n- OpenAPI reflects the chosen public representation (string/number)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:02:14.772881-05:00","updated_at":"2025-12-17T21:30:51.570323-05:00","closed_at":"2025-12-17T21:30:51.570323-05:00","dependencies":[{"issue_id":"cooking_app-w9r.11","depends_on_id":"cooking_app-w9r","type":"parent-child","created_at":"2025-12-17T20:02:14.773541-05:00","created_by":"saiaj","metadata":"{}"}]}
{"id":"cooking_app-w9r.12","title":"Clarify backend binaries: cmd/api vs cmd/cooking_app","description":"Implement RFC section E: decide whether `cmd/cooking_app` is a real admin/ops CLI or demo code. If it is the admin CLI, rename to `cmd/cli` (or similar) and remove the demo runner. If not, delete it or document its purpose.","acceptance_criteria":"- Repo makes it clear which binaries are supported deliverables\n- Dead/demo code paths are removed or documented\n- README and any build/release docs reflect the decision","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T20:02:14.85722-05:00","updated_at":"2025-12-18T06:23:22.196641-05:00","closed_at":"2025-12-18T06:23:22.196641-05:00","dependencies":[{"issue_id":"cooking_app-w9r.12","depends_on_id":"cooking_app-w9r","type":"parent-child","created_at":"2025-12-17T20:02:14.857912-05:00","created_by":"saiaj","metadata":"{}"}]}
{"id":"cooking_app-w9r.13","title":"Add small boundary helpers to keep handlers DRY (decodeJSON, parseUUIDParam, pg unique violation)","description":"Implement RFC section F: add a few small, explicit helpers at HTTP/DB boundaries (JSON decoding, UUID parsing, unique-violation detection) to reduce repetition without over-abstracting.","acceptance_criteria":"- Common handler boilerplate is reduced via small helpers\n- Helpers are used by multiple endpoints and are well-tested\n- No generic framework abstractions are introduced","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-17T20:02:14.941431-05:00","updated_at":"2025-12-18T06:23:22.243352-05:00","closed_at":"2025-12-18T06:23:22.243352-05:00","dependencies":[{"issue_id":"cooking_app-w9r.13","depends_on_id":"cooking_app-w9r","type":"parent-child","created_at":"2025-12-17T20:02:14.942157-05:00","created_by":"saiaj","metadata":"{}"}]}
{"id":"cooking_app-w9r.14","title":"Add audit logging for auth + token lifecycle events","description":"From RFC section H: define and implement audit logging expectations for auth and token lifecycle events (login, logout, token create/delete, session invalidation). Ensure logs are structured and do not leak secrets.","acceptance_criteria":"- Auth/token lifecycle events emit structured audit logs with stable fields\n- Logs avoid secrets (PATs, passwords, raw tokens)\n- Integration tests cover at least one audit-log emission path (or unit tests for logger wrapper)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:02:15.025946-05:00","updated_at":"2025-12-18T06:23:22.288753-05:00","closed_at":"2025-12-18T06:23:22.288753-05:00","dependencies":[{"issue_id":"cooking_app-w9r.14","depends_on_id":"cooking_app-w9r","type":"parent-child","created_at":"2025-12-17T20:02:15.02661-05:00","created_by":"saiaj","metadata":"{}"},{"issue_id":"cooking_app-w9r.14","depends_on_id":"cooking_app-w9r.1","type":"blocks","created_at":"2025-12-17T20:02:15.027323-05:00","created_by":"saiaj","metadata":"{}"}]}
{"id":"cooking_app-w9r.2","title":"Align /api/v1/auth/me and /api/v1/auth/logout OpenAPI security with runtime","description":"Implement RFC section A: make OpenAPI `security` requirements for `/api/v1/auth/me` and `/api/v1/auth/logout` match actual behavior.\n\nIncludes: route/middleware wiring changes (cookie vs bearer acceptance), defining logout semantics for bearer, and integration tests for unauthorized behavior + response shape.","acceptance_criteria":"- OpenAPI `security` matches runtime behavior for `/auth/me` and `/auth/logout`\n- Each endpoint has integration tests covering unauthorized behavior + problem response shape\n- No contract drift in `backend/internal/openapi/*` tests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T20:02:14.003964-05:00","updated_at":"2025-12-17T20:17:03.080677-05:00","closed_at":"2025-12-17T20:17:03.080677-05:00","dependencies":[{"issue_id":"cooking_app-w9r.2","depends_on_id":"cooking_app-w9r","type":"parent-child","created_at":"2025-12-17T20:02:14.004618-05:00","created_by":"saiaj","metadata":"{}"},{"issue_id":"cooking_app-w9r.2","depends_on_id":"cooking_app-w9r.1","type":"blocks","created_at":"2025-12-17T20:02:14.005303-05:00","created_by":"saiaj","metadata":"{}"}]}
{"id":"cooking_app-w9r.3","title":"Standardize problem + validation responses across all endpoints","description":"Implement RFC section B: use a single `response.Problem` envelope for errors, with validation details as `[]response.FieldError` (and omitted/null details otherwise). Remove/refactor ad-hoc validation writers and align handlers on one shape.\n\nAlso define stable `code` values and document them in OpenAPI.","acceptance_criteria":"- All endpoints emit `response.Problem` for errors\n- Validation errors use `[]response.FieldError` only\n- Stable `code` taxonomy exists (e.g. validation_error, not_found, conflict, unauthorized, forbidden, rate_limited) and is documented in OpenAPI","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T20:02:14.09792-05:00","updated_at":"2025-12-17T20:19:34.867382-05:00","closed_at":"2025-12-17T20:19:34.867382-05:00","dependencies":[{"issue_id":"cooking_app-w9r.3","depends_on_id":"cooking_app-w9r","type":"parent-child","created_at":"2025-12-17T20:02:14.098566-05:00","created_by":"saiaj","metadata":"{}"}]}
{"id":"cooking_app-w9r.4","title":"Make migrations vs sqlc schema a single source-of-truth (CI drift check)","description":"Implement RFC section G: eliminate schema drift between `backend/migrations/*` (goose) and sqlc schema inputs (`backend/internal/db/schema.sql` / `backend/sqlc.yaml`).\n\nPreferred approach: migrations are source-of-truth; CI generates/validates sqlc schema from migrations (or sqlc reads migrations directly), and fails on diffs.","acceptance_criteria":"- CI fails if migrations and sqlc schema inputs diverge\n- One documented workflow exists for schema changes (no manual dual edits)\n- Developers can regenerate schema inputs locally with a make target","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T20:02:14.18159-05:00","updated_at":"2025-12-17T20:23:10.225287-05:00","closed_at":"2025-12-17T20:23:10.225287-05:00","dependencies":[{"issue_id":"cooking_app-w9r.4","depends_on_id":"cooking_app-w9r","type":"parent-child","created_at":"2025-12-17T20:02:14.182228-05:00","created_by":"saiaj","metadata":"{}"}]}
{"id":"cooking_app-w9r.5","title":"Add CSRF protection strategy for cookie-auth unsafe methods","description":"Implement the CSRF strategy chosen in the security model (RFC section H). Apply to cookie-authenticated unsafe methods (POST/PUT/PATCH/DELETE) and add regression tests for auth endpoints.","acceptance_criteria":"- CSRF strategy is implemented and documented\n- Cookie-auth unsafe methods are protected\n- Integration tests cover CSRF failure/success paths for representative endpoints","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T20:02:14.264906-05:00","updated_at":"2025-12-17T20:29:06.146061-05:00","closed_at":"2025-12-17T20:29:06.146061-05:00","dependencies":[{"issue_id":"cooking_app-w9r.5","depends_on_id":"cooking_app-w9r","type":"parent-child","created_at":"2025-12-17T20:02:14.265554-05:00","created_by":"saiaj","metadata":"{}"},{"issue_id":"cooking_app-w9r.5","depends_on_id":"cooking_app-w9r.1","type":"blocks","created_at":"2025-12-17T20:02:14.266235-05:00","created_by":"saiaj","metadata":"{}"}]}
{"id":"cooking_app-w9r.6","title":"Add rate limiting for login and token issuance endpoints","description":"Implement RFC section H: add throttling for `POST /api/v1/auth/login` and token creation endpoints to reduce brute-force and abuse risk. Include configurable limits and integration tests.","acceptance_criteria":"- Login and token issuance endpoints enforce rate limits\n- Rate limit behavior is configurable via env\n- Integration tests assert 429 + problem response shape when limits exceeded","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T20:02:14.34994-05:00","updated_at":"2025-12-17T20:45:31.272839-05:00","closed_at":"2025-12-17T20:45:31.272839-05:00","dependencies":[{"issue_id":"cooking_app-w9r.6","depends_on_id":"cooking_app-w9r","type":"parent-child","created_at":"2025-12-17T20:02:14.350611-05:00","created_by":"saiaj","metadata":"{}"},{"issue_id":"cooking_app-w9r.6","depends_on_id":"cooking_app-w9r.1","type":"blocks","created_at":"2025-12-17T20:02:14.35133-05:00","created_by":"saiaj","metadata":"{}"}]}
{"id":"cooking_app-w9r.7","title":"Centralize HTTP error mapping and leakage control","description":"Implement RFC section I: define a minimal internal error taxonomy and one mapping point from internal errors to (status, problem body, log level). Ensure internal causes are logged but not returned to clients.","acceptance_criteria":"- Handlers can return typed errors without choosing HTTP status codes directly\n- Internal errors are logged with context; responses stay stable and non-leaky\n- Problem `code`/message/details are consistent across handlers","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:02:14.434922-05:00","updated_at":"2025-12-17T21:08:19.552765-05:00","closed_at":"2025-12-17T21:08:19.552765-05:00","dependencies":[{"issue_id":"cooking_app-w9r.7","depends_on_id":"cooking_app-w9r","type":"parent-child","created_at":"2025-12-17T20:02:14.435626-05:00","created_by":"saiaj","metadata":"{}"},{"issue_id":"cooking_app-w9r.7","depends_on_id":"cooking_app-w9r.3","type":"blocks","created_at":"2025-12-17T20:02:14.436368-05:00","created_by":"saiaj","metadata":"{}"}]}
{"id":"cooking_app-w9r.8","title":"Strengthen OpenAPI drift defenses beyond required paths","description":"Implement RFC sections A/J: expand OpenAPI validation to include status codes, security requirements, and at least one response schema per endpoint. Add negative-path contract tests for auth endpoints and at least one request/response validation test per tag group.","acceptance_criteria":"- OpenAPI tests validate status/security/response schemas (not just path presence)\n- At least one end-to-end request/response validation test exists per major tag group\n- Contract tests cover both success and problem responses for representative endpoints","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:02:14.520067-05:00","updated_at":"2025-12-17T21:13:32.222118-05:00","closed_at":"2025-12-17T21:13:32.222118-05:00","dependencies":[{"issue_id":"cooking_app-w9r.8","depends_on_id":"cooking_app-w9r","type":"parent-child","created_at":"2025-12-17T20:02:14.520713-05:00","created_by":"saiaj","metadata":"{}"},{"issue_id":"cooking_app-w9r.8","depends_on_id":"cooking_app-w9r.2","type":"blocks","created_at":"2025-12-17T20:02:14.521457-05:00","created_by":"saiaj","metadata":"{}"},{"issue_id":"cooking_app-w9r.8","depends_on_id":"cooking_app-w9r.3","type":"blocks","created_at":"2025-12-17T20:02:14.522053-05:00","created_by":"saiaj","metadata":"{}"}]}
{"id":"cooking_app-w9r.9","title":"Add HTTP request hardening defaults (size limits, strict JSON stance, server timeouts)","description":"Implement RFC section K: enforce request body size limits on JSON endpoints, decide and implement a stance on unknown JSON fields, and configure `http.Server` timeouts (`ReadTimeout`, `WriteTimeout`, `IdleTimeout`) in addition to `ReadHeaderTimeout`.","acceptance_criteria":"- All JSON endpoints enforce a max request size\n- Strict vs permissive JSON decoding decision is implemented and documented\n- `http.Server` timeouts are configured to mitigate slow-client attacks","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:02:14.605209-05:00","updated_at":"2025-12-17T21:22:23.562662-05:00","closed_at":"2025-12-17T21:22:23.562662-05:00","dependencies":[{"issue_id":"cooking_app-w9r.9","depends_on_id":"cooking_app-w9r","type":"parent-child","created_at":"2025-12-17T20:02:14.606087-05:00","created_by":"saiaj","metadata":"{}"}]}
{"id":"cooking_app-wgo","title":"Recipes list: make book and tag labels clickable filters","description":"In recipes list items, make book name and tag names clickable Links to the filtered list (`/recipes?book_id=...`, `/recipes?tag_id=...`).","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T22:31:51.752543-05:00","updated_at":"2025-12-13T22:37:06.835486-05:00","closed_at":"2025-12-13T22:37:06.835486-05:00"}
{"id":"cooking_app-x1o","title":"CLI: honor --api-url override for stored creds","description":"When --api-url is provided, cookctl should prefer it over stored credential API URLs.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-22T23:40:09.601695-05:00","updated_at":"2025-12-22T23:40:16.813156-05:00","closed_at":"2025-12-22T23:40:16.813156-05:00"}
{"id":"cooking_app-x6z","title":"Spec cleanup: remove Umami references and align env var names","description":"The spec still refers to \"Umami-like\" and uses UMAMI_* example env var names; update wording and examples to reflect the actual cooking_app implementation and naming.","acceptance_criteria":"- `personal-recipe-app-spec.md` no longer contains `umami`/`UMAMI_` references unless explicitly required.\n- Bootstrap section references the implemented CLI approach and/or uses cooking_app-prefixed env var names.\n- `make ci` passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T21:53:19.822019-05:00","updated_at":"2025-12-13T21:54:27.704128-05:00","closed_at":"2025-12-13T21:54:27.704128-05:00"}
{"id":"cooking_app-xhj","title":"Backend recipes: Implement POST /api/v1/recipes create (validation + transactional inserts)","description":"Implement recipe creation with structured ingredients, steps, and tags.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 8.7.3 (Create recipe), 7.2.4–7.2.7 (schema), 9.2 (transactional pattern).\n\nImplementation notes:\n- Validate per spec: title required, servings \u003e 0, times \u003e= 0, steps are 1..N consecutive, ingredient positions unique.\n- Insert recipe row + ingredients + steps + recipe_tags transactionally.\n- Audit fields: populate created/updated fields with the authenticated user.","acceptance_criteria":"- Endpoint returns `201` with recipe detail response as spec’d.\n- Validation errors use problem-style JSON with field details.\n- Unit tests cover validation rules.\n- Integration tests cover full create with ingredients/steps/tags and correct audit fields.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T11:30:45.213284-05:00","updated_at":"2025-12-13T21:10:55.207646-05:00","closed_at":"2025-12-13T21:10:55.207646-05:00","dependencies":[{"issue_id":"cooking_app-xhj","depends_on_id":"cooking_app-2iw","type":"parent-child","created_at":"2025-12-13T11:35:07.343639-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-xhj","depends_on_id":"cooking_app-m04","type":"blocks","created_at":"2025-12-13T11:36:41.699201-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-xhj","depends_on_id":"cooking_app-h12","type":"blocks","created_at":"2025-12-13T11:36:41.703872-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-xv8","title":"Backend auth: Add bootstrap-first-user CLI command","description":"Provide a safe bootstrap path to create the first user on a fresh database.\n\nSpec references:\n- `personal-recipe-app-spec.md` section 3.2 (Bootstrap requirement) and 7.2.1 (bootstrap note for `created_by/updated_by`).\n\nImplementation notes:\n- Prefer a CLI command as recommended (avoid a long-lived bootstrap HTTP endpoint).\n- Suggested location: extend existing CLI (`backend/cmd/cooking_app`) with a subcommand like `bootstrap-user`.\n- The command should:\n  - refuse to run if the `users` table is non-empty\n  - create the first user with `created_by = new_user_id` and `updated_by = new_user_id` (per spec)\n  - print minimal success output (never print password)","acceptance_criteria":"- CLI can create the first user only when `users` is empty; otherwise errors safely.\n- Integration test covers the empty/non-empty behavior.\n- If CLI name/flags differ from spec wording, update `personal-recipe-app-spec.md` to document the final bootstrap procedure.\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T11:29:24.533995-05:00","updated_at":"2025-12-13T16:54:02.023984-05:00","closed_at":"2025-12-13T16:54:02.023984-05:00","dependencies":[{"issue_id":"cooking_app-xv8","depends_on_id":"cooking_app-hz4","type":"parent-child","created_at":"2025-12-13T11:34:56.883813-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-xv8","depends_on_id":"cooking_app-h12","type":"blocks","created_at":"2025-12-13T11:36:17.54333-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-xv8","depends_on_id":"cooking_app-0uh","type":"blocks","created_at":"2025-12-13T11:36:17.559588-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-xv8","depends_on_id":"cooking_app-qno","type":"blocks","created_at":"2025-12-13T11:36:17.602983-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-xvo","title":"CLI: support auth set --token-stdin","description":"Add --token-stdin to cookctl auth set to avoid shell history leaks. Update help/usage, completions, docs, and add unit tests for stdin handling and conflicts.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-23T04:28:47.333109-05:00","updated_at":"2025-12-23T04:30:31.10609-05:00","closed_at":"2025-12-23T04:30:31.10609-05:00","dependencies":[{"issue_id":"cooking_app-xvo","depends_on_id":"cooking_app-6lu","type":"discovered-from","created_at":"2025-12-23T04:28:47.335457-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-y5c","title":"Recipes list: show servings/prep/total meta line","description":"In the recipes list, show a compact meta line per recipe with servings, prep minutes, and total minutes. Update tests accordingly.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T23:00:37.04971-05:00","updated_at":"2025-12-13T23:02:10.806269-05:00","closed_at":"2025-12-13T23:02:10.806269-05:00"}
{"id":"cooking_app-yvd","title":"CLI: config commands","description":"Add cookctl config view/set commands and config file persistence.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T22:44:11.566791-05:00","updated_at":"2025-12-22T22:44:15.378714-05:00","closed_at":"2025-12-22T22:44:15.378714-05:00"}
{"id":"cooking_app-z82","title":"CLI: recipe book commands","description":"Add cookctl recipe book list/create/update/delete commands with PAT auth.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-22T22:20:06.838943-05:00","updated_at":"2025-12-22T22:22:54.183483-05:00","closed_at":"2025-12-22T22:22:54.183483-05:00"}
{"id":"cooking_app-z82.1","title":"CLI: recipe book client support","description":"Add recipe book list/create/update/delete API calls to cookctl client.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:20:10.232311-05:00","updated_at":"2025-12-22T22:22:44.103705-05:00","closed_at":"2025-12-22T22:22:44.103705-05:00","dependencies":[{"issue_id":"cooking_app-z82.1","depends_on_id":"cooking_app-z82","type":"parent-child","created_at":"2025-12-22T22:20:10.23278-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-z82.2","title":"CLI: recipe book commands and output","description":"Implement cookctl recipe book commands with table/json output and confirmation handling.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:20:14.9655-05:00","updated_at":"2025-12-22T22:22:47.479597-05:00","closed_at":"2025-12-22T22:22:47.479597-05:00","dependencies":[{"issue_id":"cooking_app-z82.2","depends_on_id":"cooking_app-z82","type":"parent-child","created_at":"2025-12-22T22:20:14.965964-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-z82.3","title":"CLI: recipe book command tests","description":"Add unit tests for recipe book commands.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T22:20:17.992869-05:00","updated_at":"2025-12-22T22:22:50.484039-05:00","closed_at":"2025-12-22T22:22:50.484039-05:00","dependencies":[{"issue_id":"cooking_app-z82.3","depends_on_id":"cooking_app-z82","type":"parent-child","created_at":"2025-12-22T22:20:17.9933-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-zbh","title":"Docs: add cookctl CLI usage","description":"Document cookctl installation, auth, and common commands, and link it from the README.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T23:04:44.805385-05:00","updated_at":"2025-12-22T23:05:16.812474-05:00","closed_at":"2025-12-22T23:05:16.812474-05:00"}
{"id":"cooking_app-zbj","title":"Frontend recipes: Implement /recipes/new and /recipes/:id/edit RecipeEditor (RHF + zod)","description":"Implement recipe create/edit form with structured ingredients and numbered steps.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 4.2 (Recipe requirements), 8.7.3–8.7.4 (Create/Update), 10.5 (Forms and validation), 13 (Frontend tests).\n\nImplementation notes:\n- Use React Hook Form + zod (recommended).\n- Form fields: title, servings, prep time, total time, source URL, notes.\n- Tags selector and recipe book selector.\n- Ingredients editor: add/remove/reorder; structured fields as spec.\n- Steps editor: add/remove/reorder; enforce consecutive step numbers.","acceptance_criteria":"- Create and edit flows work end-to-end against backend endpoints.\n- Client-side validation mirrors backend rules and shows field-level errors.\n- Add component tests for validation and submit behavior.\n- Run `make frontend-format` and ensure `make frontend-ci` (and `npm run test` if present) passes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T11:32:52.378146-05:00","updated_at":"2025-12-13T21:46:06.090624-05:00","closed_at":"2025-12-13T21:46:06.090624-05:00","dependencies":[{"issue_id":"cooking_app-zbj","depends_on_id":"cooking_app-7ko","type":"parent-child","created_at":"2025-12-13T11:35:22.179072-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-zbj","depends_on_id":"cooking_app-kht","type":"blocks","created_at":"2025-12-13T11:37:18.465736-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-zbj","depends_on_id":"cooking_app-xhj","type":"blocks","created_at":"2025-12-13T11:37:18.474396-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-zbj","depends_on_id":"cooking_app-hm9","type":"blocks","created_at":"2025-12-13T11:37:18.480641-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-zbj","depends_on_id":"cooking_app-rmu","type":"blocks","created_at":"2025-12-13T11:37:18.486099-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-zbj","depends_on_id":"cooking_app-e3h","type":"blocks","created_at":"2025-12-13T11:37:18.491334-05:00","created_by":"daemon","metadata":"{}"},{"issue_id":"cooking_app-zbj","depends_on_id":"cooking_app-cr4","type":"blocks","created_at":"2025-12-13T11:37:18.496035-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-zo1","title":"Deploy script should run DB migrations before verification","description":"Production deploy currently brings up services and checks /api/v1/healthz, but database migrations are not applied; bootstrap-user and most endpoints fail until goose migrations are run manually.","acceptance_criteria":"- `deploy/deploy.sh` runs goose migrations against the compose DB (idempotent)\n- Deployment script waits for DB readiness and fails with helpful logs if migrations fail\n- README mentions how to bootstrap first user","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-14T13:33:22.722927-05:00","updated_at":"2025-12-14T13:34:59.119169-05:00","closed_at":"2025-12-14T13:34:59.119169-05:00","dependencies":[{"issue_id":"cooking_app-zo1","depends_on_id":"cooking_app-r8c","type":"discovered-from","created_at":"2025-12-14T13:33:27.015295-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"cooking_app-zux","title":"CLI: support recipe stdin input","description":"Allow recipe create/update to read JSON payloads from stdin when --stdin is provided.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-23T04:05:19.014024-05:00","updated_at":"2025-12-23T04:08:12.553931-05:00","closed_at":"2025-12-23T04:08:12.553931-05:00"}
{"id":"cooking_app-zvm","title":"Backend: Standardize migrations tool and Makefile targets","description":"Choose and implement a single migrations tool for the Go backend, then wire it into the repo so all environments can apply migrations consistently.\n\nSpec references:\n- `personal-recipe-app-spec.md` sections 6.1 (Migrations), 9.1 (Service layout), 7 (Data model).\n- Existing note: `backend/migrations/README.md`.\n\nImplementation notes:\n- Pick either `goose` or `atlas` (both allowed per spec); document the choice.\n- Add Makefile targets for at least: create migration, migrate up, migrate down, status/version.\n- Ensure `DATABASE_URL` is the single source of connection config (matches current compose usage).\n- Keep local dev ergonomics (works with `make dev-up` DB).","acceptance_criteria":"- Tool choice is implemented and documented; if the choice differs from spec recommendations/wording, update `personal-recipe-app-spec.md` accordingly.\n- Make targets exist and are documented in `backend/migrations/README.md` (and/or backend README) with example commands.\n- Add automated tests that validate the migrations tool wiring works (e.g., apply migrations to a test Postgres and assert expected schema artifacts exist).\n- Run `make backend-fmt` and ensure `make backend-ci` passes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T11:27:28.648407-05:00","updated_at":"2025-12-13T12:21:38.045667-05:00","closed_at":"2025-12-13T12:21:38.045667-05:00","dependencies":[{"issue_id":"cooking_app-zvm","depends_on_id":"cooking_app-dcn","type":"parent-child","created_at":"2025-12-13T11:34:47.234119-05:00","created_by":"daemon","metadata":"{}"}]}
